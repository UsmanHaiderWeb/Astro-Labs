import{r as s,j as i,$ as Qo,a as it,b as Jo,c as es}from"./index-DMkccXl_.js";import{u as Wt,a as Ie,c as Ue,b as me,d as U,P as Le,e as zn,f as ts,g as ve,h as ns}from"./index-BdjukbCb.js";import{c as Hn,R as rs,I as os,u as ss}from"./index-CjXPQYiP.js";import{P as X}from"./index-BUIlqyS-.js";import{c as Z}from"./utils-DCjegGDd.js";import{L as oe,I as as}from"./label-CdE0uxzC.js";import{B as Ce}from"./button-BYu5HMAI.js";import{c as rt,a as is,_ as ls,u as cs,b as _e,z as us,f as ds,s as fs,d as hs,R as ps,e as ms,h as lt,P as zt,g as Ht,i as Ut,F as Kt,D as Yt,j as ct,k as Un,A as qt,C as Kn,l as Yn,m as qn,n as Xn,S as Gn,V as vs,T as gs,o as xs,p as xn}from"./scroll-area-9kaMX3wP.js";import{u as ee,S as Xt}from"./index-Dwshsc2j.js";import{u as Zn}from"./index-Mx62q9E3.js";import{c as Ke}from"./createLucideIcon-BrkIjxZD.js";import{C as Gt}from"./check-Cilx9MUw.js";import{u as Qn}from"./useQuery-C4JnA6GT.js";import{g as bs,a as ys,b as ws,c as Cs,u as Ss}from"./AxiosCalls-xZ3s-Ai1.js";import{R as Es,u as bn,s as $e}from"./ShowToast-BRQ17xVS.js";import{X as Ns}from"./x-DMIibDS1.js";import{C as Jn}from"./chevron-down-BNpJAh-u.js";import"./index-DVywk9k7.js";/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Rs=Ke("ChevronUp",Ps);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $s=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],js=Ke("Download",$s);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],_s=Ke("Search",Ts);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ds=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],ks=Ke("Trash2",Ds);/**
 * @license lucide-react v0.479.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Is=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],As=Ke("Upload",Is);var Zt="Tabs",[Ms,Zc]=Ue(Zt,[Hn]),er=Hn(),[Os,Qt]=Ms(Zt),tr=s.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,onValueChange:o,defaultValue:a,orientation:l="horizontal",dir:c,activationMode:u="automatic",...d}=n,f=Wt(c),[h,m]=Ie({prop:r,onChange:o,defaultProp:a});return i.jsx(Os,{scope:t,baseId:me(),value:h,onValueChange:m,orientation:l,dir:f,activationMode:u,children:i.jsx(X.div,{dir:f,"data-orientation":l,...d,ref:e})})});tr.displayName=Zt;var nr="TabsList",rr=s.forwardRef((n,e)=>{const{__scopeTabs:t,loop:r=!0,...o}=n,a=Qt(nr,t),l=er(t);return i.jsx(rs,{asChild:!0,...l,orientation:a.orientation,dir:a.dir,loop:r,children:i.jsx(X.div,{role:"tablist","aria-orientation":a.orientation,...o,ref:e})})});rr.displayName=nr;var or="TabsTrigger",sr=s.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,disabled:o=!1,...a}=n,l=Qt(or,t),c=er(t),u=ir(l.baseId,r),d=lr(l.baseId,r),f=r===l.value;return i.jsx(os,{asChild:!0,...c,focusable:!o,active:f,children:i.jsx(X.button,{type:"button",role:"tab","aria-selected":f,"aria-controls":d,"data-state":f?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:u,...a,ref:e,onMouseDown:U(n.onMouseDown,h=>{!o&&h.button===0&&h.ctrlKey===!1?l.onValueChange(r):h.preventDefault()}),onKeyDown:U(n.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&l.onValueChange(r)}),onFocus:U(n.onFocus,()=>{const h=l.activationMode!=="manual";!f&&!o&&h&&l.onValueChange(r)})})})});sr.displayName=or;var ar="TabsContent",Ls=s.forwardRef((n,e)=>{const{__scopeTabs:t,value:r,forceMount:o,children:a,...l}=n,c=Qt(ar,t),u=ir(c.baseId,r),d=lr(c.baseId,r),f=r===c.value,h=s.useRef(f);return s.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(Le,{present:o||f,children:({present:m})=>i.jsx(X.div,{"data-state":f?"active":"inactive","data-orientation":c.orientation,role:"tabpanel","aria-labelledby":u,hidden:!m,id:d,tabIndex:0,...l,ref:e,style:{...n.style,animationDuration:h.current?"0s":void 0},children:m&&a})})});Ls.displayName=ar;function ir(n,e){return`${n}-trigger-${e}`}function lr(n,e){return`${n}-content-${e}`}var Fs=tr,Bs=rr,Vs=sr;function Ws({className:n,...e}){return i.jsx(Fs,{"data-slot":"tabs",className:Z("flex flex-col gap-2",n),...e})}function zs({className:n,...e}){return i.jsx(Bs,{"data-slot":"tabs-list",className:Z("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-1",n),...e})}function yn({className:n,...e}){return i.jsx(Vs,{"data-slot":"tabs-trigger",className:Z("data-[state=active]:bg-background data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring inline-flex flex-1 items-center justify-center gap-1.5 rounded-md px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...e})}var cr=["PageUp","PageDown"],ur=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],dr={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Fe="Slider",[Rt,Hs,Us]=zn(Fe),[fr,Qc]=Ue(Fe,[Us]),[Ks,ut]=fr(Fe),hr=s.forwardRef((n,e)=>{const{name:t,min:r=0,max:o=100,step:a=1,orientation:l="horizontal",disabled:c=!1,minStepsBetweenThumbs:u=0,defaultValue:d=[r],value:f,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:v=!1,form:x,...p}=n,g=s.useRef(new Set),w=s.useRef(0),S=l==="horizontal"?Ys:qs,[P=[],N]=Ie({prop:f,defaultProp:d,onChange:F=>{var Q;(Q=[...g.current][w.current])==null||Q.focus(),h(F)}}),D=s.useRef(P);function k(F){const Y=Js(P,F);V(F,Y)}function E(F){V(F,w.current)}function I(){const F=D.current[w.current];P[w.current]!==F&&m(P)}function V(F,Y,{commit:Q}={commit:!1}){const G=ra(a),R=oa(Math.round((F-r)/a)*a+r,G),C=rt(R,[r,o]);N((L=[])=>{const M=Zs(L,C,Y);if(na(M,u*a)){w.current=M.indexOf(C);const K=String(M)!==String(L);return K&&Q&&m(M),K?M:L}else return L})}return i.jsx(Ks,{scope:n.__scopeSlider,name:t,disabled:c,min:r,max:o,valueIndexToChangeRef:w,thumbs:g.current,values:P,orientation:l,form:x,children:i.jsx(Rt.Provider,{scope:n.__scopeSlider,children:i.jsx(Rt.Slot,{scope:n.__scopeSlider,children:i.jsx(S,{"aria-disabled":c,"data-disabled":c?"":void 0,...p,ref:e,onPointerDown:U(p.onPointerDown,()=>{c||(D.current=P)}),min:r,max:o,inverted:v,onSlideStart:c?void 0:k,onSlideMove:c?void 0:E,onSlideEnd:c?void 0:I,onHomeKeyDown:()=>!c&&V(r,0,{commit:!0}),onEndKeyDown:()=>!c&&V(o,P.length-1,{commit:!0}),onStepKeyDown:({event:F,direction:Y})=>{if(!c){const R=cr.includes(F.key)||F.shiftKey&&ur.includes(F.key)?10:1,C=w.current,L=P[C],M=a*R*Y;V(L+M,C,{commit:!0})}}})})})})});hr.displayName=Fe;var[pr,mr]=fr(Fe,{startEdge:"left",endEdge:"right",size:"width",direction:1}),Ys=s.forwardRef((n,e)=>{const{min:t,max:r,dir:o,inverted:a,onSlideStart:l,onSlideMove:c,onSlideEnd:u,onStepKeyDown:d,...f}=n,[h,m]=s.useState(null),v=ee(e,S=>m(S)),x=s.useRef(void 0),p=Wt(o),g=p==="ltr",w=g&&!a||!g&&a;function y(S){const P=x.current||h.getBoundingClientRect(),N=[0,P.width],k=Jt(N,w?[t,r]:[r,t]);return x.current=P,k(S-P.left)}return i.jsx(pr,{scope:n.__scopeSlider,startEdge:w?"left":"right",endEdge:w?"right":"left",direction:w?1:-1,size:"width",children:i.jsx(vr,{dir:p,"data-orientation":"horizontal",...f,ref:v,style:{...f.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:S=>{const P=y(S.clientX);l==null||l(P)},onSlideMove:S=>{const P=y(S.clientX);c==null||c(P)},onSlideEnd:()=>{x.current=void 0,u==null||u()},onStepKeyDown:S=>{const N=dr[w?"from-left":"from-right"].includes(S.key);d==null||d({event:S,direction:N?-1:1})}})})}),qs=s.forwardRef((n,e)=>{const{min:t,max:r,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=n,f=s.useRef(null),h=ee(e,f),m=s.useRef(void 0),v=!o;function x(p){const g=m.current||f.current.getBoundingClientRect(),w=[0,g.height],S=Jt(w,v?[r,t]:[t,r]);return m.current=g,S(p-g.top)}return i.jsx(pr,{scope:n.__scopeSlider,startEdge:v?"bottom":"top",endEdge:v?"top":"bottom",size:"height",direction:v?1:-1,children:i.jsx(vr,{"data-orientation":"vertical",...d,ref:h,style:{...d.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:p=>{const g=x(p.clientY);a==null||a(g)},onSlideMove:p=>{const g=x(p.clientY);l==null||l(g)},onSlideEnd:()=>{m.current=void 0,c==null||c()},onStepKeyDown:p=>{const w=dr[v?"from-bottom":"from-top"].includes(p.key);u==null||u({event:p,direction:w?-1:1})}})})}),vr=s.forwardRef((n,e)=>{const{__scopeSlider:t,onSlideStart:r,onSlideMove:o,onSlideEnd:a,onHomeKeyDown:l,onEndKeyDown:c,onStepKeyDown:u,...d}=n,f=ut(Fe,t);return i.jsx(X.span,{...d,ref:e,onKeyDown:U(n.onKeyDown,h=>{h.key==="Home"?(l(h),h.preventDefault()):h.key==="End"?(c(h),h.preventDefault()):cr.concat(ur).includes(h.key)&&(u(h),h.preventDefault())}),onPointerDown:U(n.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),f.thumbs.has(m)?m.focus():r(h)}),onPointerMove:U(n.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&o(h)}),onPointerUp:U(n.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),a(h))})})}),gr="SliderTrack",xr=s.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,o=ut(gr,t);return i.jsx(X.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...r,ref:e})});xr.displayName=gr;var $t="SliderRange",br=s.forwardRef((n,e)=>{const{__scopeSlider:t,...r}=n,o=ut($t,t),a=mr($t,t),l=s.useRef(null),c=ee(e,l),u=o.values.length,d=o.values.map(m=>wr(m,o.min,o.max)),f=u>1?Math.min(...d):0,h=100-Math.max(...d);return i.jsx(X.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...r,ref:c,style:{...n.style,[a.startEdge]:f+"%",[a.endEdge]:h+"%"}})});br.displayName=$t;var jt="SliderThumb",yr=s.forwardRef((n,e)=>{const t=Hs(n.__scopeSlider),[r,o]=s.useState(null),a=ee(e,c=>o(c)),l=s.useMemo(()=>r?t().findIndex(c=>c.ref.current===r):-1,[t,r]);return i.jsx(Xs,{...n,ref:a,index:l})}),Xs=s.forwardRef((n,e)=>{const{__scopeSlider:t,index:r,name:o,...a}=n,l=ut(jt,t),c=mr(jt,t),[u,d]=s.useState(null),f=ee(e,y=>d(y)),h=u?l.form||!!u.closest("form"):!0,m=ss(u),v=l.values[r],x=v===void 0?0:wr(v,l.min,l.max),p=Qs(r,l.values.length),g=m==null?void 0:m[c.size],w=g?ea(g,x,c.direction):0;return s.useEffect(()=>{if(u)return l.thumbs.add(u),()=>{l.thumbs.delete(u)}},[u,l.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[c.startEdge]:`calc(${x}% + ${w}px)`},children:[i.jsx(Rt.ItemSlot,{scope:n.__scopeSlider,children:i.jsx(X.span,{role:"slider","aria-label":n["aria-label"]||p,"aria-valuemin":l.min,"aria-valuenow":v,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...a,ref:f,style:v===void 0?{display:"none"}:n.style,onFocus:U(n.onFocus,()=>{l.valueIndexToChangeRef.current=r})})}),h&&i.jsx(Gs,{name:o??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:v},r)]})});yr.displayName=jt;var Gs=n=>{const{value:e,...t}=n,r=s.useRef(null),o=Zn(e);return s.useEffect(()=>{const a=r.current,l=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(l,"value").set;if(o!==e&&u){const d=new Event("input",{bubbles:!0});u.call(a,e),a.dispatchEvent(d)}},[o,e]),i.jsx("input",{style:{display:"none"},...t,ref:r,defaultValue:e})};function Zs(n=[],e,t){const r=[...n];return r[t]=e,r.sort((o,a)=>o-a)}function wr(n,e,t){const a=100/(t-e)*(n-e);return rt(a,[0,100])}function Qs(n,e){return e>2?`Value ${n+1} of ${e}`:e===2?["Minimum","Maximum"][n]:void 0}function Js(n,e){if(n.length===1)return 0;const t=n.map(o=>Math.abs(o-e)),r=Math.min(...t);return t.indexOf(r)}function ea(n,e,t){const r=n/2,a=Jt([0,50],[0,r]);return(r-a(e)*t)*t}function ta(n){return n.slice(0,-1).map((e,t)=>n[t+1]-e)}function na(n,e){if(e>0){const t=ta(n);return Math.min(...t)>=e}return!0}function Jt(n,e){return t=>{if(n[0]===n[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(n[1]-n[0]);return e[0]+r*(t-n[0])}}function ra(n){return(String(n).split(".")[1]||"").length}function oa(n,e){const t=Math.pow(10,e);return Math.round(n*t)/t}var Cr=hr,sa=xr,aa=br,ia=yr;const ie=s.forwardRef(({className:n,...e},t)=>i.jsxs(Cr,{ref:t,className:Z("relative flex w-full touch-none select-none items-center",n),...e,children:[i.jsx(sa,{className:"sliderTrack relative h-2 w-full grow overflow-hidden rounded-full bg-secondary/40 cursor-pointer",children:i.jsx(aa,{className:"sliderRange absolute h-full cursor-pointer bg-secondary/70"})}),i.jsx(ia,{className:"sliderThumb block h-5 w-5 rounded-full border-2 border-primary bg-secondary ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 cursor-grab"})]}));ie.displayName=Cr.displayName;var wn=1,la=.9,ca=.8,ua=.17,gt=.1,xt=.999,da=.9999,fa=.99,ha=/[\\\/_+.#"@\[\(\{&]/,pa=/[\\\/_+.#"@\[\(\{&]/g,ma=/[\s-]/,Sr=/[\s-]/g;function Tt(n,e,t,r,o,a,l){if(a===e.length)return o===n.length?wn:fa;var c=`${o},${a}`;if(l[c]!==void 0)return l[c];for(var u=r.charAt(a),d=t.indexOf(u,o),f=0,h,m,v,x;d>=0;)h=Tt(n,e,t,r,d+1,a+1,l),h>f&&(d===o?h*=wn:ha.test(n.charAt(d-1))?(h*=ca,v=n.slice(o,d-1).match(pa),v&&o>0&&(h*=Math.pow(xt,v.length))):ma.test(n.charAt(d-1))?(h*=la,x=n.slice(o,d-1).match(Sr),x&&o>0&&(h*=Math.pow(xt,x.length))):(h*=ua,o>0&&(h*=Math.pow(xt,d-o))),n.charAt(d)!==e.charAt(a)&&(h*=da)),(h<gt&&t.charAt(d-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&t.charAt(d-1)!==r.charAt(a))&&(m=Tt(n,e,t,r,d+1,a+2,l),m*gt>h&&(h=m*gt)),h>f&&(f=h),d=t.indexOf(u,d+1);return l[c]=f,f}function Cn(n){return n.toLowerCase().replace(Sr," ")}function va(n,e,t){return n=t&&t.length>0?`${n+" "+t.join(" ")}`:n,Tt(n,e,Cn(n),Cn(e),0,0,{})}function re(){return re=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},re.apply(null,arguments)}function ke(n,e,{checkForDefaultPrevented:t=!0}={}){return function(o){if(n==null||n(o),t===!1||!o.defaultPrevented)return e==null?void 0:e(o)}}function ga(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Er(...n){return e=>n.forEach(t=>ga(t,e))}function Ye(...n){return s.useCallback(Er(...n),n)}function xa(n,e){const t=s.createContext(e);function r(a){const{children:l,...c}=a,u=s.useMemo(()=>c,Object.values(c));return s.createElement(t.Provider,{value:u},l)}function o(a){const l=s.useContext(t);if(l)return l;if(e!==void 0)return e;throw new Error(`\`${a}\` must be used within \`${n}\``)}return r.displayName=n+"Provider",[r,o]}function ba(n,e=[]){let t=[];function r(a,l){const c=s.createContext(l),u=t.length;t=[...t,l];function d(h){const{scope:m,children:v,...x}=h,p=(m==null?void 0:m[n][u])||c,g=s.useMemo(()=>x,Object.values(x));return s.createElement(p.Provider,{value:g},v)}function f(h,m){const v=(m==null?void 0:m[n][u])||c,x=s.useContext(v);if(x)return x;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${a}\``)}return d.displayName=a+"Provider",[d,f]}const o=()=>{const a=t.map(l=>s.createContext(l));return function(c){const u=(c==null?void 0:c[n])||a;return s.useMemo(()=>({[`__scope${n}`]:{...c,[n]:u}}),[c,u])}};return o.scopeName=n,[r,ya(o,...e)]}function ya(...n){const e=n[0];if(n.length===1)return e;const t=()=>{const r=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(a){const l=r.reduce((c,{useScope:u,scopeName:d})=>{const h=u(a)[`__scope${d}`];return{...c,...h}},{});return s.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return t.scopeName=e.scopeName,t}const wa=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{},Ca=Qo.useId||(()=>{});let Sa=0;function bt(n){const[e,t]=s.useState(Ca());return wa(()=>{t(r=>r??String(Sa++))},[n]),n||(e?`radix-${e}`:"")}function Nr(n){const e=s.useRef(n);return s.useEffect(()=>{e.current=n}),s.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function Ea({prop:n,defaultProp:e,onChange:t=()=>{}}){const[r,o]=Na({defaultProp:e,onChange:t}),a=n!==void 0,l=a?n:r,c=Nr(t),u=s.useCallback(d=>{if(a){const h=typeof d=="function"?d(n):d;h!==n&&c(h)}else o(d)},[a,n,o,c]);return[l,u]}function Na({defaultProp:n,onChange:e}){const t=s.useState(n),[r]=t,o=s.useRef(r),a=Nr(e);return s.useEffect(()=>{o.current!==r&&(a(r),o.current=r)},[r,o,a]),t}function Pa(n,e){typeof n=="function"?n(e):n!=null&&(n.current=e)}function Ra(...n){return e=>n.forEach(t=>Pa(t,e))}const Pr=s.forwardRef((n,e)=>{const{children:t,...r}=n,o=s.Children.toArray(t),a=o.find(ja);if(a){const l=a.props.children,c=o.map(u=>u===a?s.Children.count(l)>1?s.Children.only(null):s.isValidElement(l)?l.props.children:null:u);return s.createElement(_t,re({},r,{ref:e}),s.isValidElement(l)?s.cloneElement(l,void 0,c):null)}return s.createElement(_t,re({},r,{ref:e}),t)});Pr.displayName="Slot";const _t=s.forwardRef((n,e)=>{const{children:t,...r}=n;return s.isValidElement(t)?s.cloneElement(t,{...Ta(r,t.props),ref:e?Ra(e,t.ref):t.ref}):s.Children.count(t)>1?s.Children.only(null):null});_t.displayName="SlotClone";const $a=({children:n})=>s.createElement(s.Fragment,null,n);function ja(n){return s.isValidElement(n)&&n.type===$a}function Ta(n,e){const t={...e};for(const r in e){const o=n[r],a=e[r];/^on[A-Z]/.test(r)?o&&a?t[r]=(...c)=>{a(...c),o(...c)}:o&&(t[r]=o):r==="style"?t[r]={...o,...a}:r==="className"&&(t[r]=[o,a].filter(Boolean).join(" "))}return{...n,...t}}const _a=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],le=_a.reduce((n,e)=>{const t=s.forwardRef((r,o)=>{const{asChild:a,...l}=r,c=a?Pr:e;return s.useEffect(()=>{window[Symbol.for("radix-ui")]=!0},[]),s.createElement(c,re({},l,{ref:o}))});return t.displayName=`Primitive.${e}`,{...n,[e]:t}},{});function Da(n,e){n&&it.flushSync(()=>n.dispatchEvent(e))}function en(n){const e=s.useRef(n);return s.useEffect(()=>{e.current=n}),s.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}function ka(n,e=globalThis==null?void 0:globalThis.document){const t=en(n);s.useEffect(()=>{const r=o=>{o.key==="Escape"&&t(o)};return e.addEventListener("keydown",r),()=>e.removeEventListener("keydown",r)},[t,e])}const Dt="dismissableLayer.update",Ia="dismissableLayer.pointerDownOutside",Aa="dismissableLayer.focusOutside";let Sn;const Ma=s.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Oa=s.forwardRef((n,e)=>{var t;const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:l,onInteractOutside:c,onDismiss:u,...d}=n,f=s.useContext(Ma),[h,m]=s.useState(null),v=(t=h==null?void 0:h.ownerDocument)!==null&&t!==void 0?t:globalThis==null?void 0:globalThis.document,[,x]=s.useState({}),p=Ye(e,E=>m(E)),g=Array.from(f.layers),[w]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),y=g.indexOf(w),S=h?g.indexOf(h):-1,P=f.layersWithOutsidePointerEventsDisabled.size>0,N=S>=y,D=La(E=>{const I=E.target,V=[...f.branches].some(F=>F.contains(I));!N||V||(a==null||a(E),c==null||c(E),E.defaultPrevented||u==null||u())},v),k=Fa(E=>{const I=E.target;[...f.branches].some(F=>F.contains(I))||(l==null||l(E),c==null||c(E),E.defaultPrevented||u==null||u())},v);return ka(E=>{S===f.layers.size-1&&(o==null||o(E),!E.defaultPrevented&&u&&(E.preventDefault(),u()))},v),s.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Sn=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),En(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Sn)}},[h,v,r,f]),s.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),En())},[h,f]),s.useEffect(()=>{const E=()=>x({});return document.addEventListener(Dt,E),()=>document.removeEventListener(Dt,E)},[]),s.createElement(le.div,re({},d,{ref:p,style:{pointerEvents:P?N?"auto":"none":void 0,...n.style},onFocusCapture:ke(n.onFocusCapture,k.onFocusCapture),onBlurCapture:ke(n.onBlurCapture,k.onBlurCapture),onPointerDownCapture:ke(n.onPointerDownCapture,D.onPointerDownCapture)}))});function La(n,e=globalThis==null?void 0:globalThis.document){const t=en(n),r=s.useRef(!1),o=s.useRef(()=>{});return s.useEffect(()=>{const a=c=>{if(c.target&&!r.current){let d=function(){Rr(Ia,t,u,{discrete:!0})};const u={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",o.current),o.current=d,e.addEventListener("click",o.current,{once:!0})):d()}else e.removeEventListener("click",o.current);r.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",a),e.removeEventListener("click",o.current)}},[e,t]),{onPointerDownCapture:()=>r.current=!0}}function Fa(n,e=globalThis==null?void 0:globalThis.document){const t=en(n),r=s.useRef(!1);return s.useEffect(()=>{const o=a=>{a.target&&!r.current&&Rr(Aa,t,{originalEvent:a},{discrete:!1})};return e.addEventListener("focusin",o),()=>e.removeEventListener("focusin",o)},[e,t]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function En(){const n=new CustomEvent(Dt);document.dispatchEvent(n)}function Rr(n,e,t,{discrete:r}){const o=t.originalEvent.target,a=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:t});e&&o.addEventListener(n,e,{once:!0}),r?Da(o,a):o.dispatchEvent(a)}function Nn(n){const e=s.useRef(n);return s.useEffect(()=>{e.current=n}),s.useMemo(()=>(...t)=>{var r;return(r=e.current)===null||r===void 0?void 0:r.call(e,...t)},[])}const yt="focusScope.autoFocusOnMount",wt="focusScope.autoFocusOnUnmount",Pn={bubbles:!1,cancelable:!0},Ba=s.forwardRef((n,e)=>{const{loop:t=!1,trapped:r=!1,onMountAutoFocus:o,onUnmountAutoFocus:a,...l}=n,[c,u]=s.useState(null),d=Nn(o),f=Nn(a),h=s.useRef(null),m=Ye(e,p=>u(p)),v=s.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;s.useEffect(()=>{if(r){let p=function(S){if(v.paused||!c)return;const P=S.target;c.contains(P)?h.current=P:he(h.current,{select:!0})},g=function(S){if(v.paused||!c)return;const P=S.relatedTarget;P!==null&&(c.contains(P)||he(h.current,{select:!0}))},w=function(S){if(document.activeElement===document.body)for(const N of S)N.removedNodes.length>0&&he(c)};document.addEventListener("focusin",p),document.addEventListener("focusout",g);const y=new MutationObserver(w);return c&&y.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",g),y.disconnect()}}},[r,c,v.paused]),s.useEffect(()=>{if(c){$n.add(v);const p=document.activeElement;if(!c.contains(p)){const w=new CustomEvent(yt,Pn);c.addEventListener(yt,d),c.dispatchEvent(w),w.defaultPrevented||(Va(Ka($r(c)),{select:!0}),document.activeElement===p&&he(c))}return()=>{c.removeEventListener(yt,d),setTimeout(()=>{const w=new CustomEvent(wt,Pn);c.addEventListener(wt,f),c.dispatchEvent(w),w.defaultPrevented||he(p??document.body,{select:!0}),c.removeEventListener(wt,f),$n.remove(v)},0)}}},[c,d,f,v]);const x=s.useCallback(p=>{if(!t&&!r||v.paused)return;const g=p.key==="Tab"&&!p.altKey&&!p.ctrlKey&&!p.metaKey,w=document.activeElement;if(g&&w){const y=p.currentTarget,[S,P]=Wa(y);S&&P?!p.shiftKey&&w===P?(p.preventDefault(),t&&he(S,{select:!0})):p.shiftKey&&w===S&&(p.preventDefault(),t&&he(P,{select:!0})):w===y&&p.preventDefault()}},[t,r,v.paused]);return s.createElement(le.div,re({tabIndex:-1},l,{ref:m,onKeyDown:x}))});function Va(n,{select:e=!1}={}){const t=document.activeElement;for(const r of n)if(he(r,{select:e}),document.activeElement!==t)return}function Wa(n){const e=$r(n),t=Rn(e,n),r=Rn(e.reverse(),n);return[t,r]}function $r(n){const e=[],t=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const o=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||o?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;t.nextNode();)e.push(t.currentNode);return e}function Rn(n,e){for(const t of n)if(!za(t,{upTo:e}))return t}function za(n,{upTo:e}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(e!==void 0&&n===e)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function Ha(n){return n instanceof HTMLInputElement&&"select"in n}function he(n,{select:e=!1}={}){if(n&&n.focus){const t=document.activeElement;n.focus({preventScroll:!0}),n!==t&&Ha(n)&&e&&n.select()}}const $n=Ua();function Ua(){let n=[];return{add(e){const t=n[0];e!==t&&(t==null||t.pause()),n=jn(n,e),n.unshift(e)},remove(e){var t;n=jn(n,e),(t=n[0])===null||t===void 0||t.resume()}}}function jn(n,e){const t=[...n],r=t.indexOf(e);return r!==-1&&t.splice(r,1),t}function Ka(n){return n.filter(e=>e.tagName!=="A")}const Ya=s.forwardRef((n,e)=>{var t;const{container:r=globalThis==null||(t=globalThis.document)===null||t===void 0?void 0:t.body,...o}=n;return r?Jo.createPortal(s.createElement(le.div,re({},o,{ref:e})),r):null}),Tn=globalThis!=null&&globalThis.document?s.useLayoutEffect:()=>{};function qa(n,e){return s.useReducer((t,r)=>{const o=e[t][r];return o??t},n)}const dt=n=>{const{present:e,children:t}=n,r=Xa(e),o=typeof t=="function"?t({present:r.isPresent}):s.Children.only(t),a=Ye(r.ref,o.ref);return typeof t=="function"||r.isPresent?s.cloneElement(o,{ref:a}):null};dt.displayName="Presence";function Xa(n){const[e,t]=s.useState(),r=s.useRef({}),o=s.useRef(n),a=s.useRef("none"),l=n?"mounted":"unmounted",[c,u]=qa(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const d=Qe(r.current);a.current=c==="mounted"?d:"none"},[c]),Tn(()=>{const d=r.current,f=o.current;if(f!==n){const m=a.current,v=Qe(d);n?u("MOUNT"):v==="none"||(d==null?void 0:d.display)==="none"?u("UNMOUNT"):u(f&&m!==v?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,u]),Tn(()=>{if(e){const d=h=>{const v=Qe(r.current).includes(h.animationName);h.target===e&&v&&it.flushSync(()=>u("ANIMATION_END"))},f=h=>{h.target===e&&(a.current=Qe(r.current))};return e.addEventListener("animationstart",f),e.addEventListener("animationcancel",d),e.addEventListener("animationend",d),()=>{e.removeEventListener("animationstart",f),e.removeEventListener("animationcancel",d),e.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[e,u]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:s.useCallback(d=>{d&&(r.current=getComputedStyle(d)),t(d)},[])}}function Qe(n){return(n==null?void 0:n.animationName)||"none"}let Ct=0;function Ga(){s.useEffect(()=>{var n,e;const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",(n=t[0])!==null&&n!==void 0?n:_n()),document.body.insertAdjacentElement("beforeend",(e=t[1])!==null&&e!==void 0?e:_n()),Ct++,()=>{Ct===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ct--}},[])}function _n(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.cssText="outline: none; opacity: 0; position: fixed; pointer-events: none",n}var jr=is(),St=function(){},ft=s.forwardRef(function(n,e){var t=s.useRef(null),r=s.useState({onScrollCapture:St,onWheelCapture:St,onTouchMoveCapture:St}),o=r[0],a=r[1],l=n.forwardProps,c=n.children,u=n.className,d=n.removeScrollBar,f=n.enabled,h=n.shards,m=n.sideCar,v=n.noIsolation,x=n.inert,p=n.allowPinchZoom,g=n.as,w=g===void 0?"div":g,y=ls(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as"]),S=m,P=cs([t,e]),N=_e(_e({},y),o);return s.createElement(s.Fragment,null,f&&s.createElement(S,{sideCar:jr,removeScrollBar:d,shards:h,noIsolation:v,inert:x,setCallbacks:a,allowPinchZoom:!!p,lockRef:t}),l?s.cloneElement(s.Children.only(c),_e(_e({},N),{ref:P})):s.createElement(w,_e({},N,{className:u,ref:P}),c))});ft.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};ft.classNames={fullWidth:ds,zeroRight:us};var kt=!1;if(typeof window<"u")try{var Je=Object.defineProperty({},"passive",{get:function(){return kt=!0,!0}});window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{kt=!1}var je=kt?{passive:!1}:!1,Za=function(n){return n.tagName==="TEXTAREA"},Tr=function(n,e){var t=window.getComputedStyle(n);return t[e]!=="hidden"&&!(t.overflowY===t.overflowX&&!Za(n)&&t[e]==="visible")},Qa=function(n){return Tr(n,"overflowY")},Ja=function(n){return Tr(n,"overflowX")},Dn=function(n,e){var t=e;do{typeof ShadowRoot<"u"&&t instanceof ShadowRoot&&(t=t.host);var r=_r(n,t);if(r){var o=Dr(n,t),a=o[1],l=o[2];if(a>l)return!0}t=t.parentNode}while(t&&t!==document.body);return!1},ei=function(n){var e=n.scrollTop,t=n.scrollHeight,r=n.clientHeight;return[e,t,r]},ti=function(n){var e=n.scrollLeft,t=n.scrollWidth,r=n.clientWidth;return[e,t,r]},_r=function(n,e){return n==="v"?Qa(e):Ja(e)},Dr=function(n,e){return n==="v"?ei(e):ti(e)},ni=function(n,e){return n==="h"&&e==="rtl"?-1:1},ri=function(n,e,t,r,o){var a=ni(n,window.getComputedStyle(e).direction),l=a*r,c=t.target,u=e.contains(c),d=!1,f=l>0,h=0,m=0;do{var v=Dr(n,c),x=v[0],p=v[1],g=v[2],w=p-g-a*x;(x||w)&&_r(n,c)&&(h+=w,m+=x),c=c.parentNode}while(!u&&c!==document.body||u&&(e.contains(c)||e===c));return(f&&h===0||!f&&m===0)&&(d=!0),d},et=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},kn=function(n){return[n.deltaX,n.deltaY]},In=function(n){return n&&"current"in n?n.current:n},oi=function(n,e){return n[0]===e[0]&&n[1]===e[1]},si=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},ai=0,Te=[];function ii(n){var e=s.useRef([]),t=s.useRef([0,0]),r=s.useRef(),o=s.useState(ai++)[0],a=s.useState(function(){return fs()})[0],l=s.useRef(n);s.useEffect(function(){l.current=n},[n]),s.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(o));var p=hs([n.lockRef.current],(n.shards||[]).map(In),!0).filter(Boolean);return p.forEach(function(g){return g.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),p.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(o))})}}},[n.inert,n.lockRef.current,n.shards]);var c=s.useCallback(function(p,g){if("touches"in p&&p.touches.length===2)return!l.current.allowPinchZoom;var w=et(p),y=t.current,S="deltaX"in p?p.deltaX:y[0]-w[0],P="deltaY"in p?p.deltaY:y[1]-w[1],N,D=p.target,k=Math.abs(S)>Math.abs(P)?"h":"v";if("touches"in p&&k==="h"&&D.type==="range")return!1;var E=Dn(k,D);if(!E)return!0;if(E?N=k:(N=k==="v"?"h":"v",E=Dn(k,D)),!E)return!1;if(!r.current&&"changedTouches"in p&&(S||P)&&(r.current=N),!N)return!0;var I=r.current||N;return ri(I,g,p,I==="h"?S:P)},[]),u=s.useCallback(function(p){var g=p;if(!(!Te.length||Te[Te.length-1]!==a)){var w="deltaY"in g?kn(g):et(g),y=e.current.filter(function(N){return N.name===g.type&&N.target===g.target&&oi(N.delta,w)})[0];if(y&&y.should){g.cancelable&&g.preventDefault();return}if(!y){var S=(l.current.shards||[]).map(In).filter(Boolean).filter(function(N){return N.contains(g.target)}),P=S.length>0?c(g,S[0]):!l.current.noIsolation;P&&g.cancelable&&g.preventDefault()}}},[]),d=s.useCallback(function(p,g,w,y){var S={name:p,delta:g,target:w,should:y};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(P){return P!==S})},1)},[]),f=s.useCallback(function(p){t.current=et(p),r.current=void 0},[]),h=s.useCallback(function(p){d(p.type,kn(p),p.target,c(p,n.lockRef.current))},[]),m=s.useCallback(function(p){d(p.type,et(p),p.target,c(p,n.lockRef.current))},[]);s.useEffect(function(){return Te.push(a),n.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",u,je),document.addEventListener("touchmove",u,je),document.addEventListener("touchstart",f,je),function(){Te=Te.filter(function(p){return p!==a}),document.removeEventListener("wheel",u,je),document.removeEventListener("touchmove",u,je),document.removeEventListener("touchstart",f,je)}},[]);var v=n.removeScrollBar,x=n.inert;return s.createElement(s.Fragment,null,x?s.createElement(a,{styles:si(o)}):null,v?s.createElement(ps,{gapMode:"margin"}):null)}const li=ms(jr,ii);var kr=s.forwardRef(function(n,e){return s.createElement(ft,_e({},n,{ref:e,sideCar:li}))});kr.classNames=ft.classNames;const Ir=s.forwardRef((n,e)=>{const{children:t,...r}=n,o=s.Children.toArray(t),a=o.find(ui);if(a){const l=a.props.children,c=o.map(u=>u===a?s.Children.count(l)>1?s.Children.only(null):s.isValidElement(l)?l.props.children:null:u);return s.createElement(It,re({},r,{ref:e}),s.isValidElement(l)?s.cloneElement(l,void 0,c):null)}return s.createElement(It,re({},r,{ref:e}),t)});Ir.displayName="Slot";const It=s.forwardRef((n,e)=>{const{children:t,...r}=n;return s.isValidElement(t)?s.cloneElement(t,{...di(r,t.props),ref:e?Er(e,t.ref):t.ref}):s.Children.count(t)>1?s.Children.only(null):null});It.displayName="SlotClone";const ci=({children:n})=>s.createElement(s.Fragment,null,n);function ui(n){return s.isValidElement(n)&&n.type===ci}function di(n,e){const t={...e};for(const r in e){const o=n[r],a=e[r];/^on[A-Z]/.test(r)?o&&a?t[r]=(...c)=>{a(...c),o(...c)}:o&&(t[r]=o):r==="style"?t[r]={...o,...a}:r==="className"&&(t[r]=[o,a].filter(Boolean).join(" "))}return{...n,...t}}const Ar="Dialog",[Mr,Jc]=ba(Ar),[fi,Re]=Mr(Ar),hi=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:a,modal:l=!0}=n,c=s.useRef(null),u=s.useRef(null),[d=!1,f]=Ea({prop:r,defaultProp:o,onChange:a});return s.createElement(fi,{scope:e,triggerRef:c,contentRef:u,contentId:bt(),titleId:bt(),descriptionId:bt(),open:d,onOpenChange:f,onOpenToggle:s.useCallback(()=>f(h=>!h),[f]),modal:l},t)},Or="DialogPortal",[pi,Lr]=Mr(Or,{forceMount:void 0}),mi=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=n,a=Re(Or,e);return s.createElement(pi,{scope:e,forceMount:t},s.Children.map(r,l=>s.createElement(dt,{present:t||a.open},s.createElement(Ya,{asChild:!0,container:o},l))))},At="DialogOverlay",vi=s.forwardRef((n,e)=>{const t=Lr(At,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,a=Re(At,n.__scopeDialog);return a.modal?s.createElement(dt,{present:r||a.open},s.createElement(gi,re({},o,{ref:e}))):null}),gi=s.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=Re(At,t);return s.createElement(kr,{as:Ir,allowPinchZoom:!0,shards:[o.contentRef]},s.createElement(le.div,re({"data-state":Br(o.open)},r,{ref:e,style:{pointerEvents:"auto",...r.style}})))}),Ae="DialogContent",xi=s.forwardRef((n,e)=>{const t=Lr(Ae,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,a=Re(Ae,n.__scopeDialog);return s.createElement(dt,{present:r||a.open},a.modal?s.createElement(bi,re({},o,{ref:e})):s.createElement(yi,re({},o,{ref:e})))}),bi=s.forwardRef((n,e)=>{const t=Re(Ae,n.__scopeDialog),r=s.useRef(null),o=Ye(e,t.contentRef,r);return s.useEffect(()=>{const a=r.current;if(a)return lt(a)},[]),s.createElement(Fr,re({},n,{ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ke(n.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=t.triggerRef.current)===null||l===void 0||l.focus()}),onPointerDownOutside:ke(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&a.preventDefault()}),onFocusOutside:ke(n.onFocusOutside,a=>a.preventDefault())}))}),yi=s.forwardRef((n,e)=>{const t=Re(Ae,n.__scopeDialog),r=s.useRef(!1),o=s.useRef(!1);return s.createElement(Fr,re({},n,{ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l;if((l=n.onCloseAutoFocus)===null||l===void 0||l.call(n,a),!a.defaultPrevented){var c;r.current||(c=t.triggerRef.current)===null||c===void 0||c.focus(),a.preventDefault()}r.current=!1,o.current=!1},onInteractOutside:a=>{var l,c;(l=n.onInteractOutside)===null||l===void 0||l.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const u=a.target;((c=t.triggerRef.current)===null||c===void 0?void 0:c.contains(u))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}}))}),Fr=s.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...l}=n,c=Re(Ae,t),u=s.useRef(null),d=Ye(e,u);return Ga(),s.createElement(s.Fragment,null,s.createElement(Ba,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a},s.createElement(Oa,re({role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":Br(c.open)},l,{ref:d,onDismiss:()=>c.onOpenChange(!1)}))),!1)}),wi="DialogTitle";function Br(n){return n?"open":"closed"}const Ci="DialogTitleWarning";xa(Ci,{contentName:Ae,titleName:wi,docsSlug:"dialog"});const Si=hi,Ei=mi,Ni=vi,Pi=xi;var Ve='[cmdk-group=""]',Et='[cmdk-group-items=""]',Ri='[cmdk-group-heading=""]',tn='[cmdk-item=""]',An=`${tn}:not([aria-disabled="true"])`,Mt="cmdk-item-select",we="data-value",$i=(n,e,t)=>va(n,e,t),Vr=s.createContext(void 0),qe=()=>s.useContext(Vr),Wr=s.createContext(void 0),nn=()=>s.useContext(Wr),zr=s.createContext(void 0),Hr=s.forwardRef((n,e)=>{let t=De(()=>{var b,$;return{search:"",value:($=(b=n.value)!=null?b:n.defaultValue)!=null?$:"",filtered:{count:0,items:new Map,groups:new Set}}}),r=De(()=>new Set),o=De(()=>new Map),a=De(()=>new Map),l=De(()=>new Set),c=Ur(n),{label:u,children:d,value:f,onValueChange:h,filter:m,shouldFilter:v,loop:x,disablePointerSelection:p=!1,vimBindings:g=!0,...w}=n,y=s.useId(),S=s.useId(),P=s.useId(),N=s.useRef(null),D=Fi();Se(()=>{if(f!==void 0){let b=f.trim();t.current.value=b,k.emit()}},[f]),Se(()=>{D(6,Q)},[]);let k=s.useMemo(()=>({subscribe:b=>(l.current.add(b),()=>l.current.delete(b)),snapshot:()=>t.current,setState:(b,$,A)=>{var j,H,T;if(!Object.is(t.current[b],$)){if(t.current[b]=$,b==="search")Y(),V(),D(1,F);else if(b==="value"&&(A||D(5,Q),((j=c.current)==null?void 0:j.value)!==void 0)){let W=$??"";(T=(H=c.current).onValueChange)==null||T.call(H,W);return}k.emit()}},emit:()=>{l.current.forEach(b=>b())}}),[]),E=s.useMemo(()=>({value:(b,$,A)=>{var j;$!==((j=a.current.get(b))==null?void 0:j.value)&&(a.current.set(b,{value:$,keywords:A}),t.current.filtered.items.set(b,I($,A)),D(2,()=>{V(),k.emit()}))},item:(b,$)=>(r.current.add(b),$&&(o.current.has($)?o.current.get($).add(b):o.current.set($,new Set([b]))),D(3,()=>{Y(),V(),t.current.value||F(),k.emit()}),()=>{a.current.delete(b),r.current.delete(b),t.current.filtered.items.delete(b);let A=G();D(4,()=>{Y(),(A==null?void 0:A.getAttribute("id"))===b&&F(),k.emit()})}),group:b=>(o.current.has(b)||o.current.set(b,new Set),()=>{a.current.delete(b),o.current.delete(b)}),filter:()=>c.current.shouldFilter,label:u||n["aria-label"],disablePointerSelection:p,listId:y,inputId:P,labelId:S,listInnerRef:N}),[]);function I(b,$){var A,j;let H=(j=(A=c.current)==null?void 0:A.filter)!=null?j:$i;return b?H(b,t.current.search,$):0}function V(){if(!t.current.search||c.current.shouldFilter===!1)return;let b=t.current.filtered.items,$=[];t.current.filtered.groups.forEach(j=>{let H=o.current.get(j),T=0;H.forEach(W=>{let q=b.get(W);T=Math.max(q,T)}),$.push([j,T])});let A=N.current;R().sort((j,H)=>{var T,W;let q=j.getAttribute("id"),_=H.getAttribute("id");return((T=b.get(_))!=null?T:0)-((W=b.get(q))!=null?W:0)}).forEach(j=>{let H=j.closest(Et);H?H.appendChild(j.parentElement===H?j:j.closest(`${Et} > *`)):A.appendChild(j.parentElement===A?j:j.closest(`${Et} > *`))}),$.sort((j,H)=>H[1]-j[1]).forEach(j=>{let H=N.current.querySelector(`${Ve}[${we}="${encodeURIComponent(j[0])}"]`);H==null||H.parentElement.appendChild(H)})}function F(){let b=R().find(A=>A.getAttribute("aria-disabled")!=="true"),$=b==null?void 0:b.getAttribute(we);k.setState("value",$||void 0)}function Y(){var b,$,A,j;if(!t.current.search||c.current.shouldFilter===!1){t.current.filtered.count=r.current.size;return}t.current.filtered.groups=new Set;let H=0;for(let T of r.current){let W=($=(b=a.current.get(T))==null?void 0:b.value)!=null?$:"",q=(j=(A=a.current.get(T))==null?void 0:A.keywords)!=null?j:[],_=I(W,q);t.current.filtered.items.set(T,_),_>0&&H++}for(let[T,W]of o.current)for(let q of W)if(t.current.filtered.items.get(q)>0){t.current.filtered.groups.add(T);break}t.current.filtered.count=H}function Q(){var b,$,A;let j=G();j&&(((b=j.parentElement)==null?void 0:b.firstChild)===j&&((A=($=j.closest(Ve))==null?void 0:$.querySelector(Ri))==null||A.scrollIntoView({block:"nearest"})),j.scrollIntoView({block:"nearest"}))}function G(){var b;return(b=N.current)==null?void 0:b.querySelector(`${tn}[aria-selected="true"]`)}function R(){var b;return Array.from((b=N.current)==null?void 0:b.querySelectorAll(An))}function C(b){let $=R()[b];$&&k.setState("value",$.getAttribute(we))}function L(b){var $;let A=G(),j=R(),H=j.findIndex(W=>W===A),T=j[H+b];($=c.current)!=null&&$.loop&&(T=H+b<0?j[j.length-1]:H+b===j.length?j[0]:j[H+b]),T&&k.setState("value",T.getAttribute(we))}function M(b){let $=G(),A=$==null?void 0:$.closest(Ve),j;for(;A&&!j;)A=b>0?Oi(A,Ve):Li(A,Ve),j=A==null?void 0:A.querySelector(An);j?k.setState("value",j.getAttribute(we)):L(b)}let K=()=>C(R().length-1),J=b=>{b.preventDefault(),b.metaKey?K():b.altKey?M(1):L(1)},z=b=>{b.preventDefault(),b.metaKey?C(0):b.altKey?M(-1):L(-1)};return s.createElement(le.div,{ref:e,tabIndex:-1,...w,"cmdk-root":"",onKeyDown:b=>{var $;if(($=w.onKeyDown)==null||$.call(w,b),!b.defaultPrevented)switch(b.key){case"n":case"j":{g&&b.ctrlKey&&J(b);break}case"ArrowDown":{J(b);break}case"p":case"k":{g&&b.ctrlKey&&z(b);break}case"ArrowUp":{z(b);break}case"Home":{b.preventDefault(),C(0);break}case"End":{b.preventDefault(),K();break}case"Enter":if(!b.nativeEvent.isComposing&&b.keyCode!==229){b.preventDefault();let A=G();if(A){let j=new Event(Mt);A.dispatchEvent(j)}}}}},s.createElement("label",{"cmdk-label":"",htmlFor:E.inputId,id:E.labelId,style:Vi},u),ht(n,b=>s.createElement(Wr.Provider,{value:k},s.createElement(Vr.Provider,{value:E},b))))}),ji=s.forwardRef((n,e)=>{var t,r;let o=s.useId(),a=s.useRef(null),l=s.useContext(zr),c=qe(),u=Ur(n),d=(r=(t=u.current)==null?void 0:t.forceMount)!=null?r:l==null?void 0:l.forceMount;Se(()=>{if(!d)return c.item(o,l==null?void 0:l.id)},[d]);let f=Kr(o,a,[n.value,n.children,a],n.keywords),h=nn(),m=Ee(D=>D.value&&D.value===f.current),v=Ee(D=>d||c.filter()===!1?!0:D.search?D.filtered.items.get(o)>0:!0);s.useEffect(()=>{let D=a.current;if(!(!D||n.disabled))return D.addEventListener(Mt,x),()=>D.removeEventListener(Mt,x)},[v,n.onSelect,n.disabled]);function x(){var D,k;p(),(k=(D=u.current).onSelect)==null||k.call(D,f.current)}function p(){h.setState("value",f.current,!0)}if(!v)return null;let{disabled:g,value:w,onSelect:y,forceMount:S,keywords:P,...N}=n;return s.createElement(le.div,{ref:ze([a,e]),...N,id:o,"cmdk-item":"",role:"option","aria-disabled":!!g,"aria-selected":!!m,"data-disabled":!!g,"data-selected":!!m,onPointerMove:g||c.disablePointerSelection?void 0:p,onClick:g?void 0:x},n.children)}),Ti=s.forwardRef((n,e)=>{let{heading:t,children:r,forceMount:o,...a}=n,l=s.useId(),c=s.useRef(null),u=s.useRef(null),d=s.useId(),f=qe(),h=Ee(v=>o||f.filter()===!1?!0:v.search?v.filtered.groups.has(l):!0);Se(()=>f.group(l),[]),Kr(l,c,[n.value,n.heading,u]);let m=s.useMemo(()=>({id:l,forceMount:o}),[o]);return s.createElement(le.div,{ref:ze([c,e]),...a,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},t&&s.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:d},t),ht(n,v=>s.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":t?d:void 0},s.createElement(zr.Provider,{value:m},v))))}),_i=s.forwardRef((n,e)=>{let{alwaysRender:t,...r}=n,o=s.useRef(null),a=Ee(l=>!l.search);return!t&&!a?null:s.createElement(le.div,{ref:ze([o,e]),...r,"cmdk-separator":"",role:"separator"})}),Di=s.forwardRef((n,e)=>{let{onValueChange:t,...r}=n,o=n.value!=null,a=nn(),l=Ee(f=>f.search),c=Ee(f=>f.value),u=qe(),d=s.useMemo(()=>{var f;let h=(f=u.listInnerRef.current)==null?void 0:f.querySelector(`${tn}[${we}="${encodeURIComponent(c)}"]`);return h==null?void 0:h.getAttribute("id")},[]);return s.useEffect(()=>{n.value!=null&&a.setState("search",n.value)},[n.value]),s.createElement(le.input,{ref:e,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":d,id:u.inputId,type:"text",value:o?n.value:l,onChange:f=>{o||a.setState("search",f.target.value),t==null||t(f.target.value)}})}),ki=s.forwardRef((n,e)=>{let{children:t,label:r="Suggestions",...o}=n,a=s.useRef(null),l=s.useRef(null),c=qe();return s.useEffect(()=>{if(l.current&&a.current){let u=l.current,d=a.current,f,h=new ResizeObserver(()=>{f=requestAnimationFrame(()=>{let m=u.offsetHeight;d.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return h.observe(u),()=>{cancelAnimationFrame(f),h.unobserve(u)}}},[]),s.createElement(le.div,{ref:ze([a,e]),...o,"cmdk-list":"",role:"listbox","aria-label":r,id:c.listId},ht(n,u=>s.createElement("div",{ref:ze([l,c.listInnerRef]),"cmdk-list-sizer":""},u)))}),Ii=s.forwardRef((n,e)=>{let{open:t,onOpenChange:r,overlayClassName:o,contentClassName:a,container:l,...c}=n;return s.createElement(Si,{open:t,onOpenChange:r},s.createElement(Ei,{container:l},s.createElement(Ni,{"cmdk-overlay":"",className:o}),s.createElement(Pi,{"aria-label":n.label,"cmdk-dialog":"",className:a},s.createElement(Hr,{ref:e,...c}))))}),Ai=s.forwardRef((n,e)=>Ee(t=>t.filtered.count===0)?s.createElement(le.div,{ref:e,...n,"cmdk-empty":"",role:"presentation"}):null),Mi=s.forwardRef((n,e)=>{let{progress:t,children:r,label:o="Loading...",...a}=n;return s.createElement(le.div,{ref:e,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":t,"aria-valuemin":0,"aria-valuemax":100,"aria-label":o},ht(n,l=>s.createElement("div",{"aria-hidden":!0},l)))}),ae=Object.assign(Hr,{List:ki,Item:ji,Input:Di,Group:Ti,Separator:_i,Dialog:Ii,Empty:Ai,Loading:Mi});function Oi(n,e){let t=n.nextElementSibling;for(;t;){if(t.matches(e))return t;t=t.nextElementSibling}}function Li(n,e){let t=n.previousElementSibling;for(;t;){if(t.matches(e))return t;t=t.previousElementSibling}}function Ur(n){let e=s.useRef(n);return Se(()=>{e.current=n}),e}var Se=typeof window>"u"?s.useEffect:s.useLayoutEffect;function De(n){let e=s.useRef();return e.current===void 0&&(e.current=n()),e}function ze(n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}function Ee(n){let e=nn(),t=()=>n(e.snapshot());return s.useSyncExternalStore(e.subscribe,t,t)}function Kr(n,e,t,r=[]){let o=s.useRef(),a=qe();return Se(()=>{var l;let c=(()=>{var d;for(let f of t){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(d=f.current.textContent)==null?void 0:d.trim():o.current}})(),u=r.map(d=>d.trim());a.value(n,c,u),(l=e.current)==null||l.setAttribute(we,c),o.current=c}),o}var Fi=()=>{let[n,e]=s.useState(),t=De(()=>new Map);return Se(()=>{t.current.forEach(r=>r()),t.current=new Map},[n]),(r,o)=>{t.current.set(r,o),e({})}};function Bi(n){let e=n.type;return typeof e=="function"?e(n.props):"render"in e?e.render(n.props):n}function ht({asChild:n,children:e},t){return n&&s.isValidElement(e)?s.cloneElement(Bi(e),{ref:e.ref},t(e.props.children)):t(e)}var Vi={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},rn="Dialog",[Yr,eu]=Ue(rn),[Wi,ue]=Yr(rn),qr=n=>{const{__scopeDialog:e,children:t,open:r,defaultOpen:o,onOpenChange:a,modal:l=!0}=n,c=s.useRef(null),u=s.useRef(null),[d=!1,f]=Ie({prop:r,defaultProp:o,onChange:a});return i.jsx(Wi,{scope:e,triggerRef:c,contentRef:u,contentId:me(),titleId:me(),descriptionId:me(),open:d,onOpenChange:f,onOpenToggle:s.useCallback(()=>f(h=>!h),[f]),modal:l,children:t})};qr.displayName=rn;var Xr="DialogTrigger",zi=s.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ue(Xr,t),a=ee(e,o.triggerRef);return i.jsx(X.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":an(o.open),...r,ref:a,onClick:U(n.onClick,o.onOpenToggle)})});zi.displayName=Xr;var on="DialogPortal",[Hi,Gr]=Yr(on,{forceMount:void 0}),Zr=n=>{const{__scopeDialog:e,forceMount:t,children:r,container:o}=n,a=ue(on,e);return i.jsx(Hi,{scope:e,forceMount:t,children:s.Children.map(r,l=>i.jsx(Le,{present:t||a.open,children:i.jsx(zt,{asChild:!0,container:o,children:l})}))})};Zr.displayName=on;var ot="DialogOverlay",Qr=s.forwardRef((n,e)=>{const t=Gr(ot,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,a=ue(ot,n.__scopeDialog);return a.modal?i.jsx(Le,{present:r||a.open,children:i.jsx(Ui,{...o,ref:e})}):null});Qr.displayName=ot;var Ui=s.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ue(ot,t);return i.jsx(Ht,{as:Xt,allowPinchZoom:!0,shards:[o.contentRef],children:i.jsx(X.div,{"data-state":an(o.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),Ne="DialogContent",Jr=s.forwardRef((n,e)=>{const t=Gr(Ne,n.__scopeDialog),{forceMount:r=t.forceMount,...o}=n,a=ue(Ne,n.__scopeDialog);return i.jsx(Le,{present:r||a.open,children:a.modal?i.jsx(Ki,{...o,ref:e}):i.jsx(Yi,{...o,ref:e})})});Jr.displayName=Ne;var Ki=s.forwardRef((n,e)=>{const t=ue(Ne,n.__scopeDialog),r=s.useRef(null),o=ee(e,t.contentRef,r);return s.useEffect(()=>{const a=r.current;if(a)return lt(a)},[]),i.jsx(eo,{...n,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:U(n.onCloseAutoFocus,a=>{var l;a.preventDefault(),(l=t.triggerRef.current)==null||l.focus()}),onPointerDownOutside:U(n.onPointerDownOutside,a=>{const l=a.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&a.preventDefault()}),onFocusOutside:U(n.onFocusOutside,a=>a.preventDefault())})}),Yi=s.forwardRef((n,e)=>{const t=ue(Ne,n.__scopeDialog),r=s.useRef(!1),o=s.useRef(!1);return i.jsx(eo,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,c;(l=n.onCloseAutoFocus)==null||l.call(n,a),a.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var u,d;(u=n.onInteractOutside)==null||u.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=a.target;((d=t.triggerRef.current)==null?void 0:d.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),eo=s.forwardRef((n,e)=>{const{__scopeDialog:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,...l}=n,c=ue(Ne,t),u=s.useRef(null),d=ee(e,u);return Ut(),i.jsxs(i.Fragment,{children:[i.jsx(Kt,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:i.jsx(Yt,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":an(c.open),...l,ref:d,onDismiss:()=>c.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(qi,{titleId:c.titleId}),i.jsx(Gi,{contentRef:u,descriptionId:c.descriptionId})]})]})}),sn="DialogTitle",to=s.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ue(sn,t);return i.jsx(X.h2,{id:o.titleId,...r,ref:e})});to.displayName=sn;var no="DialogDescription",ro=s.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ue(no,t);return i.jsx(X.p,{id:o.descriptionId,...r,ref:e})});ro.displayName=no;var oo="DialogClose",so=s.forwardRef((n,e)=>{const{__scopeDialog:t,...r}=n,o=ue(oo,t);return i.jsx(X.button,{type:"button",...r,ref:e,onClick:U(n.onClick,()=>o.onOpenChange(!1))})});so.displayName=oo;function an(n){return n?"open":"closed"}var ao="DialogTitleWarning",[tu,io]=ts(ao,{contentName:Ne,titleName:sn,docsSlug:"dialog"}),qi=({titleId:n})=>{const e=io(ao),t=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return s.useEffect(()=>{n&&(document.getElementById(n)||console.error(t))},[t,n]),null},Xi="DialogDescriptionWarning",Gi=({contentRef:n,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${io(Xi).contentName}}.`;return s.useEffect(()=>{var a;const o=(a=n.current)==null?void 0:a.getAttribute("aria-describedby");e&&o&&(document.getElementById(e)||console.warn(r))},[r,n,e]),null},Zi=qr,Qi=Zr,Ji=Qr,el=Jr,tl=to,nl=ro,rl=so;function ol({...n}){return i.jsx(Zi,{"data-slot":"dialog",...n})}function sl({...n}){return i.jsx(Qi,{"data-slot":"dialog-portal",...n})}function al({className:n,...e}){return i.jsx(Ji,{"data-slot":"dialog-overlay",className:Z("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[299] bg-black/80",n),...e})}function il({className:n,children:e,...t}){return i.jsxs(sl,{"data-slot":"dialog-portal",children:[i.jsx(al,{}),i.jsxs(el,{"data-slot":"dialog-content",className:Z("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",n),...t,children:[e,i.jsxs(rl,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[i.jsx(Ns,{}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function ll({className:n,...e}){return i.jsx("div",{"data-slot":"dialog-header",className:Z("flex flex-col gap-2 text-center sm:text-left",n),...e})}function cl({className:n,...e}){return i.jsx(tl,{"data-slot":"dialog-title",className:Z("text-lg leading-none font-semibold",n),...e})}function ul({className:n,...e}){return i.jsx(nl,{"data-slot":"dialog-description",className:Z("text-muted-foreground text-sm",n),...e})}const ln=s.forwardRef(({className:n,...e},t)=>i.jsx(ae,{ref:t,className:Z("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",n),...e}));ln.displayName=ae.displayName;const cn=s.forwardRef(({className:n,...e},t)=>i.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[i.jsx(_s,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),i.jsx(ae.Input,{ref:t,className:Z("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",n),...e})]}));cn.displayName=ae.Input.displayName;const un=s.forwardRef(({className:n,...e},t)=>i.jsx(ae.List,{ref:t,className:Z("max-h-[300px] overflow-y-auto overflow-x-hidden",n),...e}));un.displayName=ae.List.displayName;const dn=s.forwardRef((n,e)=>i.jsx(ae.Empty,{ref:e,className:"py-6 text-center text-sm",...n}));dn.displayName=ae.Empty.displayName;const fn=s.forwardRef(({className:n,...e},t)=>i.jsx(ae.Group,{ref:t,className:Z("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",n),...e}));fn.displayName=ae.Group.displayName;const dl=s.forwardRef(({className:n,...e},t)=>i.jsx(ae.Separator,{ref:t,className:Z("-mx-1 h-px bg-border",n),...e}));dl.displayName=ae.Separator.displayName;const hn=s.forwardRef(({className:n,...e},t)=>i.jsx(ae.Item,{ref:t,className:Z("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",n),...e}));hn.displayName=ae.Item.displayName;var pn="Popover",[lo,nu]=Ue(pn,[ct]),Xe=ct(),[fl,ge]=lo(pn),co=n=>{const{__scopePopover:e,children:t,open:r,defaultOpen:o,onOpenChange:a,modal:l=!1}=n,c=Xe(e),u=s.useRef(null),[d,f]=s.useState(!1),[h=!1,m]=Ie({prop:r,defaultProp:o,onChange:a});return i.jsx(Un,{...c,children:i.jsx(fl,{scope:e,contentId:me(),triggerRef:u,open:h,onOpenChange:m,onOpenToggle:s.useCallback(()=>m(v=>!v),[m]),hasCustomAnchor:d,onCustomAnchorAdd:s.useCallback(()=>f(!0),[]),onCustomAnchorRemove:s.useCallback(()=>f(!1),[]),modal:l,children:t})})};co.displayName=pn;var uo="PopoverAnchor",hl=s.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,o=ge(uo,t),a=Xe(t),{onCustomAnchorAdd:l,onCustomAnchorRemove:c}=o;return s.useEffect(()=>(l(),()=>c()),[l,c]),i.jsx(qt,{...a,...r,ref:e})});hl.displayName=uo;var fo="PopoverTrigger",ho=s.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,o=ge(fo,t),a=Xe(t),l=ee(e,o.triggerRef),c=i.jsx(X.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":xo(o.open),...r,ref:l,onClick:U(n.onClick,o.onOpenToggle)});return o.hasCustomAnchor?c:i.jsx(qt,{asChild:!0,...a,children:c})});ho.displayName=fo;var mn="PopoverPortal",[pl,ml]=lo(mn,{forceMount:void 0}),po=n=>{const{__scopePopover:e,forceMount:t,children:r,container:o}=n,a=ge(mn,e);return i.jsx(pl,{scope:e,forceMount:t,children:i.jsx(Le,{present:t||a.open,children:i.jsx(zt,{asChild:!0,container:o,children:r})})})};po.displayName=mn;var Me="PopoverContent",mo=s.forwardRef((n,e)=>{const t=ml(Me,n.__scopePopover),{forceMount:r=t.forceMount,...o}=n,a=ge(Me,n.__scopePopover);return i.jsx(Le,{present:r||a.open,children:a.modal?i.jsx(vl,{...o,ref:e}):i.jsx(gl,{...o,ref:e})})});mo.displayName=Me;var vl=s.forwardRef((n,e)=>{const t=ge(Me,n.__scopePopover),r=s.useRef(null),o=ee(e,r),a=s.useRef(!1);return s.useEffect(()=>{const l=r.current;if(l)return lt(l)},[]),i.jsx(Ht,{as:Xt,allowPinchZoom:!0,children:i.jsx(vo,{...n,ref:o,trapFocus:t.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:U(n.onCloseAutoFocus,l=>{var c;l.preventDefault(),a.current||(c=t.triggerRef.current)==null||c.focus()}),onPointerDownOutside:U(n.onPointerDownOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;a.current=d},{checkForDefaultPrevented:!1}),onFocusOutside:U(n.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),gl=s.forwardRef((n,e)=>{const t=ge(Me,n.__scopePopover),r=s.useRef(!1),o=s.useRef(!1);return i.jsx(vo,{...n,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var l,c;(l=n.onCloseAutoFocus)==null||l.call(n,a),a.defaultPrevented||(r.current||(c=t.triggerRef.current)==null||c.focus(),a.preventDefault()),r.current=!1,o.current=!1},onInteractOutside:a=>{var u,d;(u=n.onInteractOutside)==null||u.call(n,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const l=a.target;((d=t.triggerRef.current)==null?void 0:d.contains(l))&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&o.current&&a.preventDefault()}})}),vo=s.forwardRef((n,e)=>{const{__scopePopover:t,trapFocus:r,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onInteractOutside:f,...h}=n,m=ge(Me,t),v=Xe(t);return Ut(),i.jsx(Kt,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:o,onUnmountAutoFocus:a,children:i.jsx(Yt,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:f,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:d,onDismiss:()=>m.onOpenChange(!1),children:i.jsx(Kn,{"data-state":xo(m.open),role:"dialog",id:m.contentId,...v,...h,ref:e,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),go="PopoverClose",xl=s.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,o=ge(go,t);return i.jsx(X.button,{type:"button",...r,ref:e,onClick:U(n.onClick,()=>o.onOpenChange(!1))})});xl.displayName=go;var bl="PopoverArrow",yl=s.forwardRef((n,e)=>{const{__scopePopover:t,...r}=n,o=Xe(t);return i.jsx(Yn,{...o,...r,ref:e})});yl.displayName=bl;function xo(n){return n?"open":"closed"}var wl=co,Cl=ho,Sl=po,El=mo;function bo({...n}){return i.jsx(wl,{"data-slot":"popover",...n})}function yo({...n}){return i.jsx(Cl,{"data-slot":"popover-trigger",...n})}function wo({className:n,align:e="center",sideOffset:t=4,...r}){return i.jsx(Sl,{children:i.jsx(El,{"data-slot":"popover-content",align:e,sideOffset:t,className:Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 rounded-md border p-4 shadow-md outline-hidden",n),...r})})}const Nl=[{name:"Morgan Freeman RVC v2",model_url:"https://huggingface.co/CxronaBxndit/Morgan-Freeman/resolve/main/Morgan-Freeman.zip"},{name:"Squidward Tentacles, 1500 Epochs, RVC v2, rmvpe (Spongebob)",model_url:"https://huggingface.co/lepifort/squidwardRVC/resolve/main/squidward.zip"},{name:"Bella Poarch (RVC V2 300 Epochs MangioCrepe)",model_url:"https://huggingface.co/datasets/sleepyboyeyes/Bella/resolve/main/Bella.zip"},{name:"Boyfriend (Friday Night Funkin' Week 3)",model_url:"https://huggingface.co/DarkWeBareBears69/My-RVC-Voice-Models/resolve/main/boyfriendWeek3.zip?download=true"}],Co={voices:Nl},Pl=Co.voices.map((n,e)=>({id:(e+1).toString(),name:n.name}));function Rl({url:n,setUrl:e,selectedVoices:t,setSelectedVoices:r,pitch:o,setPitch:a,duration:l}){const[c,u]=s.useState(!1),[d,f]=s.useState(null);return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white/60 uppercase text-xs",children:"Youtube Video Link"}),i.jsx(as,{placeholder:"Paste YouTube link here",onChange:h=>{var m,v;return((v=(m=h.target)==null?void 0:m.value)==null?void 0:v.includes("https://www.youtube.com/watch?v="))&&e(h.target.value)},className:"bg-black/50 border-0 text-white placeholder:text-white/40 text-sm h-8"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white/60 uppercase text-xs",children:"Voice"}),i.jsxs(bo,{open:c,onOpenChange:u,children:[i.jsx(yo,{asChild:!0,children:i.jsx(Ce,{variant:"outline",role:"combobox","aria-expanded":c,className:"w-full justify-between bg-black/50 border-none text-white hover:bg-black/50 hover:text-white h-8 cursor-pointer",children:t.length===0?"Select Voice Models":`${t.length} selected`})}),i.jsx(wo,{className:"w-[var(--radix-popper-anchor-width)] p-0 bg-[#1a1a1a] border-white/10 z-[203]",children:i.jsxs(ln,{className:"bg-transparent w-full text-secondary",children:[i.jsx(cn,{placeholder:"Search voice models...",className:"text-white w-full"}),i.jsxs(un,{children:[i.jsx(dn,{children:"No voice model found."}),i.jsx(fn,{children:Pl.map(h=>i.jsxs(hn,{value:h.name,onSelect:m=>{if(!n||!l){u(!1),f("Please first enter a valid YouTube link.");return}if(t.length==1&&!t.includes(m)){u(!1),f("You can only choose one model.");return}else{const v=t.includes(h==null?void 0:h.name)?t.filter(x=>x!==(h==null?void 0:h.name)):t.length<5?[...t,h==null?void 0:h.name]:t;r(v)}},className:"w-full text-white cursor-pointer flex",children:[i.jsx(Gt,{className:Z("mr-2 h-4 w-4",t.includes(h==null?void 0:h.name)?"opacity-100":"opacity-0")}),i.jsx("span",{className:"text-ellipsis whitespace-nowrap overflow-hidden",children:h.name})]},h.id))})]})]})})]}),d&&i.jsx("p",{className:"text-sm text-destructive/70 mt-1",children:d})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white/60 uppercase text-xs",children:"Pitch"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[o],onValueChange:([h])=>a(h),min:-12,max:12,step:1,className:"flex-1"}),i.jsx("span",{className:"text-white min-w-[2ch] text-center text-sm",children:o})]})]})]})}const $l=Co.voices.map((n,e)=>({id:(e+1).toString(),name:n.name}));function jl({selectedVoices:n,setSelectedVoices:e,pitch:t,setPitch:r,onFileUpload:o,isPending:a,audioFile:l,handleClearAudio:c}){const[u,d]=s.useState(!1),[f,h]=s.useState(null),m=s.useRef(null),v=s.useRef(null),[x,p]=s.useState(!1),[g,w]=s.useState(null),y=localStorage.getItem("isGenerating"),S=E=>{var F;const I=(F=E.target.files)==null?void 0:F[0],V=document.getElementById("selectedAudio");V==null||V.pause(),I&&(I.size<=15*1024*1024&&(I.type==="audio/mpeg"||I.type==="audio/wav")?(h(I.name),o(I),w("")):alert("Please upload an MP3 or WAV file under 15MB."))},P=()=>{var E;(E=m.current)==null||E.click()},N=E=>{E.preventDefault(),E.dataTransfer.dropEffect="copy",p(!0)},D=()=>{p(!1)},k=E=>{var V;E.preventDefault(),p(!1);const I=(V=E.dataTransfer.files)==null?void 0:V[0];I&&(I.size<=15*1024*1024&&(I.type==="audio/mpeg"||I.type==="audio/wav")?(h(I.name),o(I),w("")):alert("Please upload an MP3 or WAV file under 15MB."))};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx(oe,{className:"text-white/60 uppercase text-xs",children:"Upload Audio"}),l&&i.jsxs("div",{"data-disabled":(y==null?void 0:y.toLocaleLowerCase())=="pending"||a,className:"flex justify-center gap-2 uppercase text-xs items-center text-destructive/60 hover:text-destructive/80 cursor-pointer data-[disabled=true]:opacity-50 data-[disabled=true]:pointer-events-none",onClick:()=>{h(null),localStorage.removeItem("job_id"),localStorage.removeItem("audioLinks"),localStorage.removeItem("isGenerating"),m.current.value="",c()},children:["Clear",i.jsx(ks,{className:"h-4 w-4 mr-1"})]})]}),i.jsxs("div",{ref:v,"data-disabled":(y==null?void 0:y.toLocaleLowerCase())=="pending"||a,className:Z("border border-dashed rounded-lg p-3 text-center transition-colors cursor-pointer data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50",x?"border-white/40":"border-white/10"),onDragOver:N,onDragLeave:D,onDrop:k,onClick:P,children:[i.jsx("input",{type:"file",ref:m,onChange:S,accept:".mp3,.wav",className:"hidden"}),i.jsxs(Ce,{variant:"ghost",className:"w-full text-white text-xs h-6 cursor-pointer",children:[i.jsx(As,{className:"h-3 w-3 mr-1"}),i.jsx("span",{className:"max-w-[80%] truncate",children:f||"Choose File"})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Supported formats: MP3, WAV (max 15MB)"})]})]}),i.jsxs("div",{className:"space-y-0.5 w-full",children:[i.jsx(oe,{className:"text-white/60 uppercase text-xs",children:"Voice"}),i.jsxs(bo,{open:u,onOpenChange:d,children:[i.jsx(yo,{asChild:!0,children:i.jsx(Ce,{variant:"outline",role:"combobox","aria-expanded":u,className:"w-full justify-between bg-black/50 border-none text-white hover:bg-black/50 hover:text-white h-8 cursor-pointer",disabled:(y==null?void 0:y.toLocaleLowerCase())=="pending"||a,children:n.length===0?"Select Voice Models":`${n.length} selected`})}),i.jsx(wo,{className:"w-[var(--radix-popper-anchor-width)] p-0 bg-[#1a1a1a] border-white/10 z-[202]",children:i.jsxs(ln,{className:"bg-transparent max-w-full text-secondary",children:[i.jsx(cn,{placeholder:"Search voice models...",className:"text-white w-full"}),i.jsxs(un,{children:[i.jsx(dn,{children:"No voice model found."}),i.jsx(fn,{children:$l.map(E=>i.jsxs(hn,{onSelect:I=>{if(!f){d(!1),w("Please first choose a valid Audio file.");return}if(n.length==1&&!n.includes(I)){d(!1),w("You can only choose one model.");return}else{const V=n.includes(E.name)?n.filter(F=>F!==E.name):[...n,E.name];e(V),w("")}},className:"text-white cursor-pointer flex",children:[i.jsx(Gt,{className:Z("mr-2 h-4 w-4",n.includes(E.name)?"opacity-100":"opacity-0")}),i.jsx("span",{className:"text-ellipsis whitespace-nowrap overflow-hidden",children:E.name})]},E.id))})]})]})})]}),g&&i.jsx("p",{className:"text-sm text-destructive/70 mt-1",children:g})]}),i.jsxs("div",{children:[i.jsx(oe,{className:"text-white/60 uppercase text-xs",children:"Pitch"}),i.jsxs("div",{className:"flex items-center space-x-4 data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50","data-disabled":(y==null?void 0:y.toLocaleLowerCase())=="pending"||a,children:[i.jsx(ie,{value:[t],onValueChange:([E])=>r(E),min:-12,max:12,step:1,className:"flex-1"}),i.jsx("span",{className:"text-white min-w-[2ch] text-center",children:t})]})]})]})}const Tl=s.memo(jl);function pe(n){const e=Math.floor(n/60),t=Math.floor(n%60);return`${e}:${t.toString().padStart(2,"0")}`}const _l=({id:n,name:e,src:t})=>{var d,f,h,m;const[r,o]=s.useState(!1),[a,l]=s.useState(null),c=s.useRef(null),u=s.useRef(null);return i.jsxs("div",{className:"bg-black/50 rounded-lg p-3",children:[i.jsxs("div",{className:"w-full flex items-center justify-between overflow-hidden",children:[i.jsxs("div",{className:"w-full flex-shrink flex items-center space-x-3",children:[i.jsx(Ce,{size:"icon",variant:"ghost",className:"flex-shrink-0 text-white h-8 w-8",onClick:()=>{var v,x,p;((v=c.current)==null?void 0:v.readyState)<2||(r?((x=c.current)==null||x.pause(),o(!1)):(p=c.current)==null||p.play())},children:r?i.jsx(qn,{className:"h-4 w-4"}):i.jsx(Xn,{className:"h-4 w-4"})}),i.jsxs("div",{className:"flex-grow",children:[i.jsx("h3",{className:"text-white text-sm line-clamp-1",children:e.replace("Download Link","")}),i.jsxs("p",{className:"text-white/60 text-xs",children:[(d=c.current)!=null&&d.currentTime?pe((f=c.current)==null?void 0:f.currentTime):"0.00"," / ",(h=c.current)!=null&&h.duration?pe((m=c.current)==null?void 0:m.duration):"0.00"]})]})]}),i.jsx(Ce,{size:"icon",variant:"ghost",className:"flex-grow text-white h-8 w-8",onClick:()=>{const v=document.createElement("a");v.href=t,v.download=e,v.click()},children:i.jsx(js,{className:"h-4 w-4"})})]}),i.jsx("div",{className:"px-3 mt-3 mb-2",children:i.jsx(ie,{className:"resultAudioSlider",ref:u,min:0,max:a==null?void 0:a.max,step:1,value:[(a==null?void 0:a.value)||0],onClick:()=>{},onValueChange:([v])=>{c.current.currentTime=v}})}),i.jsx("audio",{ref:c,id:`resultantAudio${n}`,src:t||"/audio.mp3",preload:"metadata",className:"hidden",onPlay:()=>{for(let p=0;p<5;p++)if(p!=n){const g=document.getElementById(`resultantAudio${p}`);g&&(g==null||g.pause())}const v=document.getElementById("footerAudioPlayer");v==null||v.pause();const x=document.getElementById("selectedAudio");x==null||x.pause(),o(!0)},onPause:()=>{o(!1)},onLoadedMetadata:v=>{l(x=>{var p;return{...x,max:Math.floor((p=v.target)==null?void 0:p.duration)}})},onTimeUpdate:v=>{l(x=>{var p;return{...x,value:Math.floor((p=v.target)==null?void 0:p.currentTime)}})}})]})},Dl=s.memo(_l),kl=()=>{const n=localStorage.getItem("astraToken"),{data:e}=Qn({queryKey:["queue-size"],queryFn:()=>bs({token:n}),refetchInterval:3e4,refetchOnWindowFocus:!1});return i.jsx("div",{className:"mt-3 text-right",children:i.jsxs("p",{className:"text-white/60 text-xs",children:["Queue Size: ",(e==null?void 0:e.queue_size)||0]})})},Il=s.memo(kl);function Al({isPending:n,setIsGenerating:e,isGenerating:t}){var d,f,h,m;const r=localStorage.getItem("job_id"),o=JSON.parse(localStorage.getItem("audioLinks")||"[]"),[a,l]=s.useState(null),c=localStorage.getItem("astraToken");s.useEffect(()=>{o&&l(o)},[]);const{data:u}=Qn({queryKey:["generatedAudiosData"],queryFn:()=>ys({token:c,job_id:r}),refetchInterval:3e4,refetchOnWindowFocus:!1,enabled:!!r&&((d=Object.values(o))==null?void 0:d.length)==0&&t=="pending"});return s.useEffect(()=>{var v;if(u!=null&&u.error||(u==null?void 0:u.status)=="failed"||(v=u==null?void 0:u.result)!=null&&v.error){localStorage.setItem("isGenerating","failed"),e("failed");return}(u==null?void 0:u.status)=="done"&&(localStorage.setItem("isGenerating","done"),e("done")),(u==null?void 0:u.status)=="in-progress"&&(localStorage.setItem("isGenerating","pending"),e("pending")),u!=null&&u.result&&Object.keys(u==null?void 0:u.result).length>0&&(localStorage.setItem("audioLinks",JSON.stringify(u==null?void 0:u.result)),l(u==null?void 0:u.result))},[u]),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl py-4",children:[i.jsx("h2",{className:"text-white/60 uppercase text-xs mb-2 px-4",children:"Result"}),i.jsx("div",{className:"h-32",children:a&&((f=Object.values(a))==null?void 0:f.length)>0&&(t==null?void 0:t.toLocaleLowerCase())=="done"?i.jsx(Gn,{className:"scrollbarAudioResultSection px-5 h-full",children:i.jsx("div",{className:"grid grid-cols-2 gap-3",children:(m=(h=Object.values(a))==null?void 0:h.slice(0,4))==null?void 0:m.map((v,x)=>{var p;return i.jsx(Dl,{id:x,name:(p=Object.keys(a))==null?void 0:p[x],src:v},x.toString())})})}):i.jsx("div",{className:"w-full h-full flex justify-center items-center",children:i.jsx("h3",{className:"text-white/60 uppercase text-xs mb-2 text-center",children:n||(t==null?void 0:t.toLocaleLowerCase())=="pending"?i.jsxs("span",{className:"flex items-center gap-2",children:["Converting ",i.jsx(Es,{size:18,className:"animate-spin duration-300"})]}):i.jsxs(i.Fragment,{children:["Nothing to Show.",i.jsx("br",{}),"Please try converting something."]})})})}),i.jsx("div",{className:"w-full relative px-4",children:i.jsx(Il,{})})]})}const Ml=s.memo(Al),Mn={f0_method:"rmvpe",cover_background_vocals:"false",overall_pitch:-12,main_vocals_volume:0,backup_vocals_volume:0,inst_volume:0,index_rate:.5,filter_radius:3,rms_mix_rate:.25,protect_rate:.33};var Ol=[" ","Enter","ArrowUp","ArrowDown"],Ll=[" ","Enter"],Ge="Select",[pt,mt,Fl]=zn(Ge),[Be,ru]=Ue(Ge,[Fl,ct]),vt=ct(),[Bl,xe]=Be(Ge),[Vl,Wl]=Be(Ge),So=n=>{const{__scopeSelect:e,children:t,open:r,defaultOpen:o,onOpenChange:a,value:l,defaultValue:c,onValueChange:u,dir:d,name:f,autoComplete:h,disabled:m,required:v,form:x}=n,p=vt(e),[g,w]=s.useState(null),[y,S]=s.useState(null),[P,N]=s.useState(!1),D=Wt(d),[k=!1,E]=Ie({prop:r,defaultProp:o,onChange:a}),[I,V]=Ie({prop:l,defaultProp:c,onChange:u}),F=s.useRef(null),Y=g?x||!!g.closest("form"):!0,[Q,G]=s.useState(new Set),R=Array.from(Q).map(C=>C.props.value).join(";");return i.jsx(Un,{...p,children:i.jsxs(Bl,{required:v,scope:e,trigger:g,onTriggerChange:w,valueNode:y,onValueNodeChange:S,valueNodeHasChildren:P,onValueNodeHasChildrenChange:N,contentId:me(),value:I,onValueChange:V,open:k,onOpenChange:E,dir:D,triggerPointerDownPosRef:F,disabled:m,children:[i.jsx(pt.Provider,{scope:e,children:i.jsx(Vl,{scope:n.__scopeSelect,onNativeOptionAdd:s.useCallback(C=>{G(L=>new Set(L).add(C))},[]),onNativeOptionRemove:s.useCallback(C=>{G(L=>{const M=new Set(L);return M.delete(C),M})},[]),children:t})}),Y?i.jsxs(Ko,{"aria-hidden":!0,required:v,tabIndex:-1,name:f,autoComplete:h,value:I,onChange:C=>V(C.target.value),disabled:m,form:x,children:[I===void 0?i.jsx("option",{value:""}):null,Array.from(Q)]},R):null]})})};So.displayName=Ge;var Eo="SelectTrigger",No=s.forwardRef((n,e)=>{const{__scopeSelect:t,disabled:r=!1,...o}=n,a=vt(t),l=xe(Eo,t),c=l.disabled||r,u=ee(e,l.onTriggerChange),d=mt(t),f=s.useRef("touch"),[h,m,v]=Yo(p=>{const g=d().filter(S=>!S.disabled),w=g.find(S=>S.value===l.value),y=qo(g,p,w);y!==void 0&&l.onValueChange(y.value)}),x=p=>{c||(l.onOpenChange(!0),v()),p&&(l.triggerPointerDownPosRef.current={x:Math.round(p.pageX),y:Math.round(p.pageY)})};return i.jsx(qt,{asChild:!0,...a,children:i.jsx(X.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Uo(l.value)?"":void 0,...o,ref:u,onClick:U(o.onClick,p=>{p.currentTarget.focus(),f.current!=="mouse"&&x(p)}),onPointerDown:U(o.onPointerDown,p=>{f.current=p.pointerType;const g=p.target;g.hasPointerCapture(p.pointerId)&&g.releasePointerCapture(p.pointerId),p.button===0&&p.ctrlKey===!1&&p.pointerType==="mouse"&&(x(p),p.preventDefault())}),onKeyDown:U(o.onKeyDown,p=>{const g=h.current!=="";!(p.ctrlKey||p.altKey||p.metaKey)&&p.key.length===1&&m(p.key),!(g&&p.key===" ")&&Ol.includes(p.key)&&(x(),p.preventDefault())})})})});No.displayName=Eo;var Po="SelectValue",Ro=s.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:o,children:a,placeholder:l="",...c}=n,u=xe(Po,t),{onValueNodeHasChildrenChange:d}=u,f=a!==void 0,h=ee(e,u.onValueNodeChange);return ve(()=>{d(f)},[d,f]),i.jsx(X.span,{...c,ref:h,style:{pointerEvents:"none"},children:Uo(u.value)?i.jsx(i.Fragment,{children:l}):a})});Ro.displayName=Po;var zl="SelectIcon",$o=s.forwardRef((n,e)=>{const{__scopeSelect:t,children:r,...o}=n;return i.jsx(X.span,{"aria-hidden":!0,...o,ref:e,children:r||"▼"})});$o.displayName=zl;var Hl="SelectPortal",jo=n=>i.jsx(zt,{asChild:!0,...n});jo.displayName=Hl;var Pe="SelectContent",To=s.forwardRef((n,e)=>{const t=xe(Pe,n.__scopeSelect),[r,o]=s.useState();if(ve(()=>{o(new DocumentFragment)},[]),!t.open){const a=r;return a?it.createPortal(i.jsx(_o,{scope:n.__scopeSelect,children:i.jsx(pt.Slot,{scope:n.__scopeSelect,children:i.jsx("div",{children:n.children})})}),a):null}return i.jsx(Do,{...n,ref:e})});To.displayName=Pe;var ce=10,[_o,be]=Be(Pe),Ul="SelectContentImpl",Do=s.forwardRef((n,e)=>{const{__scopeSelect:t,position:r="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:a,onPointerDownOutside:l,side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:p,avoidCollisions:g,...w}=n,y=xe(Pe,t),[S,P]=s.useState(null),[N,D]=s.useState(null),k=ee(e,T=>P(T)),[E,I]=s.useState(null),[V,F]=s.useState(null),Y=mt(t),[Q,G]=s.useState(!1),R=s.useRef(!1);s.useEffect(()=>{if(S)return lt(S)},[S]),Ut();const C=s.useCallback(T=>{const[W,...q]=Y().map(O=>O.ref.current),[_]=q.slice(-1),B=document.activeElement;for(const O of T)if(O===B||(O==null||O.scrollIntoView({block:"nearest"}),O===W&&N&&(N.scrollTop=0),O===_&&N&&(N.scrollTop=N.scrollHeight),O==null||O.focus(),document.activeElement!==B))return},[Y,N]),L=s.useCallback(()=>C([E,S]),[C,E,S]);s.useEffect(()=>{Q&&L()},[Q,L]);const{onOpenChange:M,triggerPointerDownPosRef:K}=y;s.useEffect(()=>{if(S){let T={x:0,y:0};const W=_=>{var B,O;T={x:Math.abs(Math.round(_.pageX)-(((B=K.current)==null?void 0:B.x)??0)),y:Math.abs(Math.round(_.pageY)-(((O=K.current)==null?void 0:O.y)??0))}},q=_=>{T.x<=10&&T.y<=10?_.preventDefault():S.contains(_.target)||M(!1),document.removeEventListener("pointermove",W),K.current=null};return K.current!==null&&(document.addEventListener("pointermove",W),document.addEventListener("pointerup",q,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",W),document.removeEventListener("pointerup",q,{capture:!0})}}},[S,M,K]),s.useEffect(()=>{const T=()=>M(!1);return window.addEventListener("blur",T),window.addEventListener("resize",T),()=>{window.removeEventListener("blur",T),window.removeEventListener("resize",T)}},[M]);const[J,z]=Yo(T=>{const W=Y().filter(B=>!B.disabled),q=W.find(B=>B.ref.current===document.activeElement),_=qo(W,T,q);_&&setTimeout(()=>_.ref.current.focus())}),b=s.useCallback((T,W,q)=>{const _=!R.current&&!q;(y.value!==void 0&&y.value===W||_)&&(I(T),_&&(R.current=!0))},[y.value]),$=s.useCallback(()=>S==null?void 0:S.focus(),[S]),A=s.useCallback((T,W,q)=>{const _=!R.current&&!q;(y.value!==void 0&&y.value===W||_)&&F(T)},[y.value]),j=r==="popper"?Ot:ko,H=j===Ot?{side:c,sideOffset:u,align:d,alignOffset:f,arrowPadding:h,collisionBoundary:m,collisionPadding:v,sticky:x,hideWhenDetached:p,avoidCollisions:g}:{};return i.jsx(_o,{scope:t,content:S,viewport:N,onViewportChange:D,itemRefCallback:b,selectedItem:E,onItemLeave:$,itemTextRefCallback:A,focusSelectedItem:L,selectedItemText:V,position:r,isPositioned:Q,searchRef:J,children:i.jsx(Ht,{as:Xt,allowPinchZoom:!0,children:i.jsx(Kt,{asChild:!0,trapped:y.open,onMountAutoFocus:T=>{T.preventDefault()},onUnmountAutoFocus:U(o,T=>{var W;(W=y.trigger)==null||W.focus({preventScroll:!0}),T.preventDefault()}),children:i.jsx(Yt,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:l,onFocusOutside:T=>T.preventDefault(),onDismiss:()=>y.onOpenChange(!1),children:i.jsx(j,{role:"listbox",id:y.contentId,"data-state":y.open?"open":"closed",dir:y.dir,onContextMenu:T=>T.preventDefault(),...w,...H,onPlaced:()=>G(!0),ref:k,style:{display:"flex",flexDirection:"column",outline:"none",...w.style},onKeyDown:U(w.onKeyDown,T=>{const W=T.ctrlKey||T.altKey||T.metaKey;if(T.key==="Tab"&&T.preventDefault(),!W&&T.key.length===1&&z(T.key),["ArrowUp","ArrowDown","Home","End"].includes(T.key)){let _=Y().filter(B=>!B.disabled).map(B=>B.ref.current);if(["ArrowUp","End"].includes(T.key)&&(_=_.slice().reverse()),["ArrowUp","ArrowDown"].includes(T.key)){const B=T.target,O=_.indexOf(B);_=_.slice(O+1)}setTimeout(()=>C(_)),T.preventDefault()}})})})})})})});Do.displayName=Ul;var Kl="SelectItemAlignedPosition",ko=s.forwardRef((n,e)=>{const{__scopeSelect:t,onPlaced:r,...o}=n,a=xe(Pe,t),l=be(Pe,t),[c,u]=s.useState(null),[d,f]=s.useState(null),h=ee(e,k=>f(k)),m=mt(t),v=s.useRef(!1),x=s.useRef(!0),{viewport:p,selectedItem:g,selectedItemText:w,focusSelectedItem:y}=l,S=s.useCallback(()=>{if(a.trigger&&a.valueNode&&c&&d&&p&&g&&w){const k=a.trigger.getBoundingClientRect(),E=d.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),V=w.getBoundingClientRect();if(a.dir!=="rtl"){const B=V.left-E.left,O=I.left-B,se=k.left-O,te=k.width+se,de=Math.max(te,E.width),ye=window.innerWidth-ce,fe=rt(O,[ce,Math.max(ce,ye-de)]);c.style.minWidth=te+"px",c.style.left=fe+"px"}else{const B=E.right-V.right,O=window.innerWidth-I.right-B,se=window.innerWidth-k.right-O,te=k.width+se,de=Math.max(te,E.width),ye=window.innerWidth-ce,fe=rt(O,[ce,Math.max(ce,ye-de)]);c.style.minWidth=te+"px",c.style.right=fe+"px"}const F=m(),Y=window.innerHeight-ce*2,Q=p.scrollHeight,G=window.getComputedStyle(d),R=parseInt(G.borderTopWidth,10),C=parseInt(G.paddingTop,10),L=parseInt(G.borderBottomWidth,10),M=parseInt(G.paddingBottom,10),K=R+C+Q+M+L,J=Math.min(g.offsetHeight*5,K),z=window.getComputedStyle(p),b=parseInt(z.paddingTop,10),$=parseInt(z.paddingBottom,10),A=k.top+k.height/2-ce,j=Y-A,H=g.offsetHeight/2,T=g.offsetTop+H,W=R+C+T,q=K-W;if(W<=A){const B=F.length>0&&g===F[F.length-1].ref.current;c.style.bottom="0px";const O=d.clientHeight-p.offsetTop-p.offsetHeight,se=Math.max(j,H+(B?$:0)+O+L),te=W+se;c.style.height=te+"px"}else{const B=F.length>0&&g===F[0].ref.current;c.style.top="0px";const se=Math.max(A,R+p.offsetTop+(B?b:0)+H)+q;c.style.height=se+"px",p.scrollTop=W-A+p.offsetTop}c.style.margin=`${ce}px 0`,c.style.minHeight=J+"px",c.style.maxHeight=Y+"px",r==null||r(),requestAnimationFrame(()=>v.current=!0)}},[m,a.trigger,a.valueNode,c,d,p,g,w,a.dir,r]);ve(()=>S(),[S]);const[P,N]=s.useState();ve(()=>{d&&N(window.getComputedStyle(d).zIndex)},[d]);const D=s.useCallback(k=>{k&&x.current===!0&&(S(),y==null||y(),x.current=!1)},[S,y]);return i.jsx(ql,{scope:t,contentWrapper:c,shouldExpandOnScrollRef:v,onScrollButtonChange:D,children:i.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:i.jsx(X.div,{...o,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});ko.displayName=Kl;var Yl="SelectPopperPosition",Ot=s.forwardRef((n,e)=>{const{__scopeSelect:t,align:r="start",collisionPadding:o=ce,...a}=n,l=vt(t);return i.jsx(Kn,{...l,...a,ref:e,align:r,collisionPadding:o,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Ot.displayName=Yl;var[ql,vn]=Be(Pe,{}),Lt="SelectViewport",Io=s.forwardRef((n,e)=>{const{__scopeSelect:t,nonce:r,...o}=n,a=be(Lt,t),l=vn(Lt,t),c=ee(e,a.onViewportChange),u=s.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(pt.Slot,{scope:t,children:i.jsx(X.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:U(o.onScroll,d=>{const f=d.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=l;if(m!=null&&m.current&&h){const v=Math.abs(u.current-f.scrollTop);if(v>0){const x=window.innerHeight-ce*2,p=parseFloat(h.style.minHeight),g=parseFloat(h.style.height),w=Math.max(p,g);if(w<x){const y=w+v,S=Math.min(x,y),P=y-S;h.style.height=S+"px",h.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,h.style.justifyContent="flex-end")}}}u.current=f.scrollTop})})})]})});Io.displayName=Lt;var Ao="SelectGroup",[Xl,Gl]=Be(Ao),Zl=s.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,o=me();return i.jsx(Xl,{scope:t,id:o,children:i.jsx(X.div,{role:"group","aria-labelledby":o,...r,ref:e})})});Zl.displayName=Ao;var Mo="SelectLabel",Ql=s.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,o=Gl(Mo,t);return i.jsx(X.div,{id:o.id,...r,ref:e})});Ql.displayName=Mo;var st="SelectItem",[Jl,Oo]=Be(st),Lo=s.forwardRef((n,e)=>{const{__scopeSelect:t,value:r,disabled:o=!1,textValue:a,...l}=n,c=xe(st,t),u=be(st,t),d=c.value===r,[f,h]=s.useState(a??""),[m,v]=s.useState(!1),x=ee(e,y=>{var S;return(S=u.itemRefCallback)==null?void 0:S.call(u,y,r,o)}),p=me(),g=s.useRef("touch"),w=()=>{o||(c.onValueChange(r),c.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(Jl,{scope:t,value:r,disabled:o,textId:p,isSelected:d,onItemTextChange:s.useCallback(y=>{h(S=>S||((y==null?void 0:y.textContent)??"").trim())},[]),children:i.jsx(pt.ItemSlot,{scope:t,value:r,disabled:o,textValue:f,children:i.jsx(X.div,{role:"option","aria-labelledby":p,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...l,ref:x,onFocus:U(l.onFocus,()=>v(!0)),onBlur:U(l.onBlur,()=>v(!1)),onClick:U(l.onClick,()=>{g.current!=="mouse"&&w()}),onPointerUp:U(l.onPointerUp,()=>{g.current==="mouse"&&w()}),onPointerDown:U(l.onPointerDown,y=>{g.current=y.pointerType}),onPointerMove:U(l.onPointerMove,y=>{var S;g.current=y.pointerType,o?(S=u.onItemLeave)==null||S.call(u):g.current==="mouse"&&y.currentTarget.focus({preventScroll:!0})}),onPointerLeave:U(l.onPointerLeave,y=>{var S;y.currentTarget===document.activeElement&&((S=u.onItemLeave)==null||S.call(u))}),onKeyDown:U(l.onKeyDown,y=>{var P;((P=u.searchRef)==null?void 0:P.current)!==""&&y.key===" "||(Ll.includes(y.key)&&w(),y.key===" "&&y.preventDefault())})})})})});Lo.displayName=st;var We="SelectItemText",Fo=s.forwardRef((n,e)=>{const{__scopeSelect:t,className:r,style:o,...a}=n,l=xe(We,t),c=be(We,t),u=Oo(We,t),d=Wl(We,t),[f,h]=s.useState(null),m=ee(e,w=>h(w),u.onItemTextChange,w=>{var y;return(y=c.itemTextRefCallback)==null?void 0:y.call(c,w,u.value,u.disabled)}),v=f==null?void 0:f.textContent,x=s.useMemo(()=>i.jsx("option",{value:u.value,disabled:u.disabled,children:v},u.value),[u.disabled,u.value,v]),{onNativeOptionAdd:p,onNativeOptionRemove:g}=d;return ve(()=>(p(x),()=>g(x)),[p,g,x]),i.jsxs(i.Fragment,{children:[i.jsx(X.span,{id:u.textId,...a,ref:m}),u.isSelected&&l.valueNode&&!l.valueNodeHasChildren?it.createPortal(a.children,l.valueNode):null]})});Fo.displayName=We;var Bo="SelectItemIndicator",Vo=s.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return Oo(Bo,t).isSelected?i.jsx(X.span,{"aria-hidden":!0,...r,ref:e}):null});Vo.displayName=Bo;var Ft="SelectScrollUpButton",Wo=s.forwardRef((n,e)=>{const t=be(Ft,n.__scopeSelect),r=vn(Ft,n.__scopeSelect),[o,a]=s.useState(!1),l=ee(e,r.onScrollButtonChange);return ve(()=>{if(t.viewport&&t.isPositioned){let c=function(){const d=u.scrollTop>0;a(d)};const u=t.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),o?i.jsx(Ho,{...n,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=t;c&&u&&(c.scrollTop=c.scrollTop-u.offsetHeight)}}):null});Wo.displayName=Ft;var Bt="SelectScrollDownButton",zo=s.forwardRef((n,e)=>{const t=be(Bt,n.__scopeSelect),r=vn(Bt,n.__scopeSelect),[o,a]=s.useState(!1),l=ee(e,r.onScrollButtonChange);return ve(()=>{if(t.viewport&&t.isPositioned){let c=function(){const d=u.scrollHeight-u.clientHeight,f=Math.ceil(u.scrollTop)<d;a(f)};const u=t.viewport;return c(),u.addEventListener("scroll",c),()=>u.removeEventListener("scroll",c)}},[t.viewport,t.isPositioned]),o?i.jsx(Ho,{...n,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:u}=t;c&&u&&(c.scrollTop=c.scrollTop+u.offsetHeight)}}):null});zo.displayName=Bt;var Ho=s.forwardRef((n,e)=>{const{__scopeSelect:t,onAutoScroll:r,...o}=n,a=be("SelectScrollButton",t),l=s.useRef(null),c=mt(t),u=s.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return s.useEffect(()=>()=>u(),[u]),ve(()=>{var f;const d=c().find(h=>h.ref.current===document.activeElement);(f=d==null?void 0:d.ref.current)==null||f.scrollIntoView({block:"nearest"})},[c]),i.jsx(X.div,{"aria-hidden":!0,...o,ref:e,style:{flexShrink:0,...o.style},onPointerDown:U(o.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:U(o.onPointerMove,()=>{var d;(d=a.onItemLeave)==null||d.call(a),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:U(o.onPointerLeave,()=>{u()})})}),ec="SelectSeparator",tc=s.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n;return i.jsx(X.div,{"aria-hidden":!0,...r,ref:e})});tc.displayName=ec;var Vt="SelectArrow",nc=s.forwardRef((n,e)=>{const{__scopeSelect:t,...r}=n,o=vt(t),a=xe(Vt,t),l=be(Vt,t);return a.open&&l.position==="popper"?i.jsx(Yn,{...o,...r,ref:e}):null});nc.displayName=Vt;function Uo(n){return n===""||n===void 0}var Ko=s.forwardRef((n,e)=>{const{value:t,...r}=n,o=s.useRef(null),a=ee(e,o),l=Zn(t);return s.useEffect(()=>{const c=o.current,u=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(u,"value").set;if(l!==t&&f){const h=new Event("change",{bubbles:!0});f.call(c,t),c.dispatchEvent(h)}},[l,t]),i.jsx(vs,{asChild:!0,children:i.jsx("select",{...r,ref:a,defaultValue:t})})});Ko.displayName="BubbleSelect";function Yo(n){const e=ns(n),t=s.useRef(""),r=s.useRef(0),o=s.useCallback(l=>{const c=t.current+l;e(c),function u(d){t.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>u(""),1e3))}(c)},[e]),a=s.useCallback(()=>{t.current="",window.clearTimeout(r.current)},[]);return s.useEffect(()=>()=>window.clearTimeout(r.current),[]),[t,o,a]}function qo(n,e,t){const o=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,a=t?n.indexOf(t):-1;let l=rc(n,Math.max(a,0));o.length===1&&(l=l.filter(d=>d!==t));const u=l.find(d=>d.textValue.toLowerCase().startsWith(o.toLowerCase()));return u!==t?u:void 0}function rc(n,e){return n.map((t,r)=>n[(e+r)%n.length])}var oc=So,sc=No,ac=Ro,ic=$o,lc=jo,cc=To,uc=Io,dc=Lo,fc=Fo,hc=Vo,pc=Wo,mc=zo;function On({...n}){return i.jsx(oc,{"data-slot":"select",...n})}function Ln({...n}){return i.jsx(ac,{"data-slot":"select-value",...n})}function Fn({className:n,children:e,...t}){return i.jsxs(sc,{"data-slot":"select-trigger",className:Z("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",n),...t,children:[e,i.jsx(ic,{asChild:!0,children:i.jsx(Jn,{className:"size-4 opacity-50"})})]})}function Bn({className:n,children:e,position:t="popper",...r}){return i.jsx(lc,{children:i.jsxs(cc,{"data-slot":"select-content",className:Z("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",t==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:t,...r,children:[i.jsx(vc,{}),i.jsx(uc,{className:Z("p-1",t==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),i.jsx(gc,{})]})})}function tt({className:n,children:e,...t}){return i.jsxs(dc,{"data-slot":"select-item",className:Z("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",n),...t,children:[i.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:i.jsx(hc,{children:i.jsx(Gt,{className:"size-4"})})}),i.jsx(fc,{children:e})]})}function vc({className:n,...e}){return i.jsx(pc,{"data-slot":"select-scroll-up-button",className:Z("flex cursor-default items-center justify-center py-1",n),...e,children:i.jsx(Rs,{className:"size-4"})})}function gc({className:n,...e}){return i.jsx(mc,{"data-slot":"select-scroll-down-button",className:Z("flex cursor-default items-center justify-center py-1",n),...e,children:i.jsx(Jn,{className:"size-4"})})}function xc({open:n,onOpenChange:e,advanceSettings:t,updateAdvanceSetting:r}){return i.jsx(ol,{open:n,onOpenChange:e,children:i.jsxs(il,{className:"bg-[#1A1A1A] border-white/10 text-white sm:max-w-4xl px-0 border-none outline-none z-[300]",children:[i.jsxs(ll,{children:[i.jsx(cl,{className:"text-xl font-bold text-center",children:"ADVANCED SETTINGS"}),i.jsx(ul,{className:"hidden",children:"Lorem ipsum dolor sit amet consectetur, adipisicing elit. Doloremque, facilis. Dolor, omnis eveniet debitis earum, amet eum, provident consectetur magnam consequatur praesentium eos commodi repellendus fugit ducimus molestias similique sapiente?"})]}),i.jsx(Gn,{className:"h-max px-7",children:i.jsxs("div",{className:"grid sm:grid-cols-2 gap-x-8 gap-y-4 items-start py-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Pitch Method:"}),i.jsxs(On,{defaultValue:t==null?void 0:t.f0_method,onValueChange:o=>r("f0_method",o),children:[i.jsx(Fn,{className:"bg-black border-white/10 h-8 text-sm text-white w-[160px]",children:i.jsx(Ln,{placeholder:"rmvpe"})}),i.jsxs(Bn,{className:"bg-black border-white/10 text-white z-[301]",children:[i.jsx(tt,{value:"rmvpe",className:"text-white text-sm",children:"rmvpe (default)"}),i.jsx(tt,{value:"mangio-crepe",className:"text-white text-sm",children:"mangio-crepe"})]})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"The method rmvpe ensures clarity in the vocals whereas mangio-crepe provides the output with smoother vocals."})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Pitch for Background & Instrumental:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.overall_pitch],onValueChange:([o])=>r("overall_pitch",o),min:-12,max:12,step:1,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.overall_pitch})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Changing pitch can lead to alteration in quality."})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Main Vocals Volume:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.main_vocals_volume],onValueChange:([o])=>r("main_vocals_volume",o),min:0,max:10,step:1,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.main_vocals_volume.toFixed(1)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Control volume of the Main Vocals."})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Background Vocals Volume:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.backup_vocals_volume],onValueChange:([o])=>r("backup_vocals_volume",o),min:0,max:10,step:1,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.backup_vocals_volume.toFixed(1)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Control volume of the Background Vocals."})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Instrumentals Volume:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.inst_volume],onValueChange:([o])=>r("inst_volume",o),min:0,max:10,step:1,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.inst_volume.toFixed(1)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Control volume of the Instrumentals."})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Apply AI on Background Vocals:"}),i.jsxs(On,{value:t==null?void 0:t.cover_background_vocals,onValueChange:o=>r("cover_background_vocals",o),children:[i.jsx(Fn,{className:"bg-black border-white/10 h-8 text-sm text-white w-[150px]",children:i.jsx(Ln,{placeholder:"false"})}),i.jsxs(Bn,{className:"bg-black border-white/10 text-white z-[301]",children:[i.jsx(tt,{value:"false",className:"text-white text-sm",children:"False (default)"}),i.jsx(tt,{value:"true",className:"text-white text-sm",children:"True"})]})]}),i.jsx("p",{className:"text-xs text-gray-400",children:'Set to "True" if you want to apply AI Vocals on the Background Vocals otherwise set it to "False".'})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Index Rate:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.index_rate],onValueChange:([o])=>r("index_rate",o),min:0,max:1,step:.01,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.index_rate.toFixed(2)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Control how much of AI voice's accent to keep in vocals."})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Filter Radius:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.filter_radius],onValueChange:([o])=>r("filter_radius",o),min:1,max:5,step:1,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.filter_radius.toFixed(1)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Reduce Breathiness"})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"RMS Mix Rate:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.rms_mix_rate],onValueChange:([o])=>r("rms_mix_rate",o),min:0,max:1,step:.01,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.rms_mix_rate.toFixed(2)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Control how much to mimic original vocal's loudness."})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsx(oe,{className:"text-white text-sm",children:"Protect Rate:"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(ie,{value:[t==null?void 0:t.protect_rate],onValueChange:([o])=>r("protect_rate",o),min:0,max:1,step:.01,className:"flex-1"}),i.jsx("span",{className:"text-sm min-w-[2ch]",children:t==null?void 0:t.protect_rate.toFixed(2)})]}),i.jsx("p",{className:"text-xs text-gray-400",children:"Protect voiceless consonants and breath sounds. Set to 0.5 to disable it."})]})]})]})})]})})}var bc={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function yc(n){if(typeof n=="number")return{value:n,unit:"px"};var e,t=(n.match(/^[0-9.]*/)||"").toString();t.includes(".")?e=parseFloat(t):e=parseInt(t,10);var r=(n.match(/[^0-9]*$/)||"").toString();return bc[r]?{value:e,unit:r}:(console.warn("React Spinners: ".concat(n," is not a valid css value. Defaulting to ").concat(e,"px.")),{value:e,unit:"px"})}function Nt(n){var e=yc(n);return"".concat(e.value).concat(e.unit)}var wc=function(n,e,t){var r="react-spinners-".concat(n,"-").concat(t);if(typeof window>"u"||!window.document)return r;var o=document.createElement("style");document.head.appendChild(o);var a=o.sheet,l=`
    @keyframes `.concat(r,` {
      `).concat(e,`
    }
  `);return a&&a.insertRule(l,0),r},at=function(){return at=Object.assign||function(n){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},at.apply(this,arguments)},Cc=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,r=Object.getOwnPropertySymbols(n);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(n,r[o])&&(t[r[o]]=n[r[o]]);return t},Sc=wc("BeatLoader","50% {transform: scale(0.75);opacity: 0.2} 100% {transform: scale(1);opacity: 1}","beat");function Ec(n){var e=n.loading,t=e===void 0?!0:e,r=n.color,o=r===void 0?"#000000":r,a=n.speedMultiplier,l=a===void 0?1:a,c=n.cssOverride,u=c===void 0?{}:c,d=n.size,f=d===void 0?15:d,h=n.margin,m=h===void 0?2:h,v=Cc(n,["loading","color","speedMultiplier","cssOverride","size","margin"]),x=at({display:"inherit"},u),p=function(g){return{display:"inline-block",backgroundColor:o,width:Nt(f),height:Nt(f),margin:Nt(m),borderRadius:"100%",animation:"".concat(Sc," ").concat(.7/l,"s ").concat(g%2?"0s":"".concat(.35/l,"s")," infinite linear"),animationFillMode:"both"}};return t?s.createElement("span",at({style:x},v),s.createElement("span",{style:p(1)}),s.createElement("span",{style:p(2)}),s.createElement("span",{style:p(3)})):null}function ne(n,e,t,r){return new(t||(t=Promise))(function(o,a){function l(d){try{u(r.next(d))}catch(f){a(f)}}function c(d){try{u(r.throw(d))}catch(f){a(f)}}function u(d){var f;d.done?o(d.value):(f=d.value,f instanceof t?f:new t(function(h){h(f)})).then(l,c)}u((r=r.apply(n,e||[])).next())})}class Ze{constructor(){this.listeners={}}on(e,t,r){if(this.listeners[e]||(this.listeners[e]=new Set),this.listeners[e].add(t),r==null?void 0:r.once){const o=()=>{this.un(e,o),this.un(e,t)};return this.on(e,o),o}return()=>this.un(e,t)}un(e,t){var r;(r=this.listeners[e])===null||r===void 0||r.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(r=>r(...t))}}const nt={decode:function(n,e){return ne(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:e});return t.decodeAudioData(n).finally(()=>t.close())})},createBuffer:function(n,e){return typeof n[0]=="number"&&(n=[n]),function(t){const r=t[0];if(r.some(o=>o>1||o<-1)){const o=r.length;let a=0;for(let l=0;l<o;l++){const c=Math.abs(r[l]);c>a&&(a=c)}for(const l of t)for(let c=0;c<o;c++)l[c]/=a}}(n),{duration:e,length:n[0].length,sampleRate:n[0].length/e,numberOfChannels:n.length,getChannelData:t=>n==null?void 0:n[t],copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function Xo(n,e){const t=e.xmlns?document.createElementNS(e.xmlns,n):document.createElement(n);for(const[r,o]of Object.entries(e))if(r==="children")for(const[a,l]of Object.entries(e))typeof l=="string"?t.appendChild(document.createTextNode(l)):t.appendChild(Xo(a,l));else r==="style"?Object.assign(t.style,o):r==="textContent"?t.textContent=o:t.setAttribute(r,o.toString());return t}function Vn(n,e,t){const r=Xo(n,e||{});return t==null||t.appendChild(r),r}var Nc=Object.freeze({__proto__:null,createElement:Vn,default:Vn});const Pc={fetchBlob:function(n,e,t){return ne(this,void 0,void 0,function*(){const r=yield fetch(n,t);if(r.status>=400)throw new Error(`Failed to fetch ${n}: ${r.status} (${r.statusText})`);return function(o,a){ne(this,void 0,void 0,function*(){if(!o.body||!o.headers)return;const l=o.body.getReader(),c=Number(o.headers.get("Content-Length"))||0;let u=0;const d=h=>ne(this,void 0,void 0,function*(){u+=(h==null?void 0:h.length)||0;const m=Math.round(u/c*100);a(m)}),f=()=>ne(this,void 0,void 0,function*(){let h;try{h=yield l.read()}catch{return}h.done||(d(h.value),yield f())});f()})}(r.clone(),e),r.blob()})}};class Rc extends Ze{constructor(e){super(),this.isExternalMedia=!1,e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)},{once:!0})}onMediaEvent(e,t,r){return this.media.addEventListener(e,t,r),()=>this.media.removeEventListener(e,t,r)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const r=this.getSrc();if(e&&r===e)return;this.revokeSrc();const o=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;r&&(this.media.src="");try{this.media.src=o}catch{this.media.src=e}}destroy(){this.isExternalMedia||(this.media.pause(),this.media.remove(),this.revokeSrc(),this.media.src="",this.media.load())}setMediaElement(e){this.media=e}play(){return ne(this,void 0,void 0,function*(){return this.media.play()})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}class Oe extends Ze{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.subscriptions=[],this.options=e;const r=this.parentFromOptionsContainer(e.container);this.parent=r;const[o,a]=this.initHtml();r.appendChild(o),this.container=o,this.scrollContainer=a.querySelector(".scroll"),this.wrapper=a.querySelector(".wrapper"),this.canvasWrapper=a.querySelector(".canvases"),this.progressWrapper=a.querySelector(".progress"),this.cursor=a.querySelector(".cursor"),t&&a.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){const e=t=>{const r=this.wrapper.getBoundingClientRect(),o=t.clientX-r.left,a=t.clientY-r.top;return[o/r.width,a/r.height]};if(this.wrapper.addEventListener("click",t=>{const[r,o]=e(t);this.emit("click",r,o)}),this.wrapper.addEventListener("dblclick",t=>{const[r,o]=e(t);this.emit("dblclick",r,o)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollContainer.addEventListener("scroll",()=>{const{scrollLeft:t,scrollWidth:r,clientWidth:o}=this.scrollContainer,a=t/r,l=(t+o)/r;this.emit("scroll",a,l,t,t+o)}),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender())}initDrag(){this.subscriptions.push(function(e,t,r,o,a=3,l=0,c=100){if(!e)return()=>{};const u=matchMedia("(pointer: coarse)").matches;let d=()=>{};const f=h=>{if(h.button!==l)return;h.preventDefault(),h.stopPropagation();let m=h.clientX,v=h.clientY,x=!1;const p=Date.now(),g=N=>{if(N.preventDefault(),N.stopPropagation(),u&&Date.now()-p<c)return;const D=N.clientX,k=N.clientY,E=D-m,I=k-v;if(x||Math.abs(E)>a||Math.abs(I)>a){const V=e.getBoundingClientRect(),{left:F,top:Y}=V;x||(r==null||r(m-F,v-Y),x=!0),t(E,I,D-F,k-Y),m=D,v=k}},w=N=>{if(x){const D=N.clientX,k=N.clientY,E=e.getBoundingClientRect(),{left:I,top:V}=E;o==null||o(D-I,k-V)}d()},y=N=>{N.relatedTarget&&N.relatedTarget!==document.documentElement||w(N)},S=N=>{x&&(N.stopPropagation(),N.preventDefault())},P=N=>{x&&N.preventDefault()};document.addEventListener("pointermove",g),document.addEventListener("pointerup",w),document.addEventListener("pointerout",y),document.addEventListener("pointercancel",y),document.addEventListener("touchmove",P,{passive:!1}),document.addEventListener("click",S,{capture:!0}),d=()=>{document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",w),document.removeEventListener("pointerout",y),document.removeEventListener("pointercancel",y),document.removeEventListener("touchmove",P),setTimeout(()=>{document.removeEventListener("click",S,{capture:!0})},10)}};return e.addEventListener("pointerdown",f),()=>{d(),e.removeEventListener("pointerdown",f)}}(this.wrapper,(e,t,r)=>{this.emit("drag",Math.max(0,Math.min(1,r/this.wrapper.getBoundingClientRect().width)))},e=>{this.isDragging=!0,this.emit("dragstart",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))},e=>{this.isDragging=!1,this.emit("dragend",Math.max(0,Math.min(1,e/this.wrapper.getBoundingClientRect().width)))}))}getHeight(e,t){var r;const o=((r=this.audioData)===null||r===void 0?void 0:r.numberOfChannels)||1;if(e==null)return 128;if(!isNaN(Number(e)))return Number(e);if(e==="auto"){const a=this.parent.clientHeight||128;return t!=null&&t.every(l=>!l.overlay)?a/o:a}return 128}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),r=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${r?` nonce="${r}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,r=t*e;this.setScroll(r)}destroy(){var e,t;this.subscriptions.forEach(r=>r()),this.container.remove(),(e=this.resizeObserver)===null||e===void 0||e.disconnect(),(t=this.unsubscribeOnScroll)===null||t===void 0||t.forEach(r=>r()),this.unsubscribeOnScroll=[]}createDelay(e=10){let t,r;const o=()=>{t&&clearTimeout(t),r&&r()};return this.timeouts.push(o),()=>new Promise((a,l)=>{o(),r=l,t=setTimeout(()=>{t=void 0,r=void 0,a()},e)})}convertColorValues(e){if(!Array.isArray(e))return e||"";if(e.length<2)return e[0]||"";const t=document.createElement("canvas"),r=t.getContext("2d"),o=t.height*(window.devicePixelRatio||1),a=r.createLinearGradient(0,0,0,o),l=1/(e.length-1);return e.forEach((c,u)=>{const d=u*l;a.addColorStop(d,c)}),a}getPixelRatio(){return Math.max(1,window.devicePixelRatio||1)}renderBarWaveform(e,t,r,o){const a=e[0],l=e[1]||e[0],c=a.length,{width:u,height:d}=r.canvas,f=d/2,h=this.getPixelRatio(),m=t.barWidth?t.barWidth*h:1,v=t.barGap?t.barGap*h:t.barWidth?m/2:0,x=t.barRadius||0,p=u/(m+v)/c,g=x&&"roundRect"in r?"roundRect":"rect";r.beginPath();let w=0,y=0,S=0;for(let P=0;P<=c;P++){const N=Math.round(P*p);if(N>w){const E=Math.round(y*f*o),I=E+Math.round(S*f*o)||1;let V=f-E;t.barAlign==="top"?V=0:t.barAlign==="bottom"&&(V=d-I),r[g](w*(m+v),V,m,I,x),w=N,y=0,S=0}const D=Math.abs(a[P]||0),k=Math.abs(l[P]||0);D>y&&(y=D),k>S&&(S=k)}r.fill(),r.closePath()}renderLineWaveform(e,t,r,o){const a=l=>{const c=e[l]||e[0],u=c.length,{height:d}=r.canvas,f=d/2,h=r.canvas.width/u;r.moveTo(0,f);let m=0,v=0;for(let x=0;x<=u;x++){const p=Math.round(x*h);if(p>m){const w=f+(Math.round(v*f*o)||1)*(l===0?-1:1);r.lineTo(m,w),m=p,v=0}const g=Math.abs(c[x]||0);g>v&&(v=g)}r.lineTo(m,f)};r.beginPath(),a(0),a(1),r.fill(),r.closePath()}renderWaveform(e,t,r){if(r.fillStyle=this.convertColorValues(t.waveColor),t.renderFunction)return void t.renderFunction(e,r);let o=t.barHeight||1;if(t.normalize){const a=Array.from(e[0]).reduce((l,c)=>Math.max(l,Math.abs(c)),0);o=a?1/a:1}t.barWidth||t.barGap||t.barAlign?this.renderBarWaveform(e,t,r,o):this.renderLineWaveform(e,t,r,o)}renderSingleCanvas(e,t,r,o,a,l,c){const u=this.getPixelRatio(),d=document.createElement("canvas");d.width=Math.round(r*u),d.height=Math.round(o*u),d.style.width=`${r}px`,d.style.height=`${o}px`,d.style.left=`${Math.round(a)}px`,l.appendChild(d);const f=d.getContext("2d");if(this.renderWaveform(e,t,f),d.width>0&&d.height>0){const h=d.cloneNode(),m=h.getContext("2d");m.drawImage(d,0,0),m.globalCompositeOperation="source-in",m.fillStyle=this.convertColorValues(t.progressColor),m.fillRect(0,0,d.width,d.height),c.appendChild(h)}}renderMultiCanvas(e,t,r,o,a,l){const c=this.getPixelRatio(),{clientWidth:u}=this.scrollContainer,d=r/c;let f=Math.min(Oe.MAX_CANVAS_WIDTH,u,d),h={};if(f===0)return;if(t.barWidth||t.barGap){const g=t.barWidth||.5,w=g+(t.barGap||g/2);f%w!=0&&(f=Math.floor(f/w)*w)}const m=g=>{if(g<0||g>=v||h[g])return;h[g]=!0;const w=g*f,y=Math.min(d-w,f);if(y<=0)return;const S=e.map(P=>{const N=Math.floor(w/d*P.length),D=Math.floor((w+y)/d*P.length);return P.slice(N,D)});this.renderSingleCanvas(S,t,y,o,w,a,l)},v=Math.ceil(d/f);if(!this.isScrollable){for(let g=0;g<v;g++)m(g);return}const x=this.scrollContainer.scrollLeft/d,p=Math.floor(x*v);if(m(p-1),m(p),m(p+1),v>1){const g=this.on("scroll",()=>{const{scrollLeft:w}=this.scrollContainer,y=Math.floor(w/d*v);Object.keys(h).length>Oe.MAX_NODES&&(a.innerHTML="",l.innerHTML="",h={}),m(y-1),m(y),m(y+1)});this.unsubscribeOnScroll.push(g)}}renderChannel(e,t,r,o){var{overlay:a}=t,l=function(f,h){var m={};for(var v in f)Object.prototype.hasOwnProperty.call(f,v)&&h.indexOf(v)<0&&(m[v]=f[v]);if(f!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(v=Object.getOwnPropertySymbols(f);x<v.length;x++)h.indexOf(v[x])<0&&Object.prototype.propertyIsEnumerable.call(f,v[x])&&(m[v[x]]=f[v[x]])}return m}(t,["overlay"]);const c=document.createElement("div"),u=this.getHeight(l.height,l.splitChannels);c.style.height=`${u}px`,a&&o>0&&(c.style.marginTop=`-${u}px`),this.canvasWrapper.style.minHeight=`${u}px`,this.canvasWrapper.appendChild(c);const d=c.cloneNode();this.progressWrapper.appendChild(d),this.renderMultiCanvas(e,l,r,u,c,d)}render(e){return ne(this,void 0,void 0,function*(){var t;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const r=this.getPixelRatio(),o=this.scrollContainer.clientWidth,a=Math.ceil(e.duration*(this.options.minPxPerSec||0));this.isScrollable=a>o;const l=this.options.fillParent&&!this.isScrollable,c=(l?o:a)*r;if(this.wrapper.style.width=l?"100%":`${a}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let u=0;u<e.numberOfChannels;u++){const d=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[u]);this.renderChannel([e.getChannelData(u)],d,c,u)}else{const u=[e.getChannelData(0)];e.numberOfChannels>1&&u.push(e.getChannelData(1)),this.renderChannel(u,this.options,c,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(r=>r()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:r}=this.progressWrapper.getBoundingClientRect();let o=r-t;o*=2,o=o<0?Math.floor(o):Math.ceil(o),o/=2,this.scrollContainer.scrollLeft+=o}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:r,scrollWidth:o,clientWidth:a}=this.scrollContainer,l=e*o,c=r,u=r+a,d=a/2;if(this.isDragging)l+30>u?this.scrollContainer.scrollLeft+=30:l-30<c&&(this.scrollContainer.scrollLeft-=30);else{(l<c||l>u)&&(this.scrollContainer.scrollLeft=l-(this.options.autoCenter?d:0));const f=l-r-d;t&&this.options.autoCenter&&f>0&&(this.scrollContainer.scrollLeft+=Math.min(f,10))}{const f=this.scrollContainer.scrollLeft,h=f/o,m=(f+a)/o;this.emit("scroll",h,m,f,f+a)}}renderProgress(e,t){if(isNaN(e))return;const r=100*e;this.canvasWrapper.style.clipPath=`polygon(${r}% 0, 100% 0, 100% 100%, ${r}% 100%)`,this.progressWrapper.style.width=`${r}%`,this.cursor.style.left=`${r}%`,this.cursor.style.transform=`translateX(-${Math.round(r)===100?this.options.cursorWidth:0}px)`,this.isScrollable&&this.options.autoScroll&&this.scrollIntoView(e,t)}exportImage(e,t,r){return ne(this,void 0,void 0,function*(){const o=this.canvasWrapper.querySelectorAll("canvas");if(!o.length)throw new Error("No waveform data");if(r==="dataURL"){const a=Array.from(o).map(l=>l.toDataURL(e,t));return Promise.resolve(a)}return Promise.all(Array.from(o).map(a=>new Promise((l,c)=>{a.toBlob(u=>{u?l(u):c(new Error("Could not export image"))},e,t)})))})}}Oe.MAX_CANVAS_WIDTH=8e3,Oe.MAX_NODES=10;class $c extends Ze{constructor(){super(...arguments),this.unsubscribe=()=>{}}start(){this.unsubscribe=this.on("tick",()=>{requestAnimationFrame(()=>{this.emit("tick")})}),this.emit("tick")}stop(){this.unsubscribe()}destroy(){this.unsubscribe()}}class Pt extends Ze{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return ne(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then(t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()}).then(t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t)).then(t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())})}_play(){var e;if(!this.paused)return;this.paused=!1,(e=this.bufferNode)===null||e===void 0||e.disconnect(),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let t=this.playedDuration*this._playbackRate;(t>=this.duration||t<0)&&(t=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,t),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return ne(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){var t,r;const o=e-this.currentTime;(t=this.bufferNode)===null||t===void 0||t.stop(this.audioContext.currentTime+o),(r=this.bufferNode)===null||r===void 0||r.addEventListener("ended",()=>{this.bufferNode=null,this.pause()},{once:!0})}setSinkId(e){return ne(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let r=0;r<t;r++)e.push(this.buffer.getChannelData(r));return e}}const jc={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class He extends Rc{static create(e){return new He(e)}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Pt:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.options=Object.assign({},jc,e),this.timer=new $c;const r=t?void 0:this.getMediaElement();this.renderer=new Oe(this.options,r),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initPlugins();const o=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:l}=this.options;(o||a&&l)&&this.load(o,a,l).catch(()=>null)})}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const e=this.updateProgress();this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t,r,o)=>{const a=this.getDuration();this.emit("scroll",e*a,t*a,r,o)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",e=>{this.emit("dragstart",e)}),this.renderer.on("dragend",e=>{this.emit("dragend",e)}));{let e;this.subscriptions.push(this.renderer.on("drag",t=>{if(!this.options.interact)return;let r;this.renderer.renderProgress(t),clearTimeout(e),this.isPlaying()?r=0:this.options.dragToSeek===!0?r=200:typeof this.options.dragToSeek=="object"&&this.options.dragToSeek!==void 0&&(r=this.options.dragToSeek.debounceTime),e=setTimeout(()=>{this.seekTo(t)},r),this.emit("interaction",t*this.getDuration()),this.emit("drag",t)}))}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=nt.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=nt.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){return e._init(this),this.plugins.push(e),this.subscriptions.push(e.once("destroy",()=>{this.plugins=this.plugins.filter(t=>t!==e)})),e}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,r,o){return ne(this,void 0,void 0,function*(){var a;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,!t&&!r){const c=this.options.fetchParams||{};window.AbortController&&!c.signal&&(this.abortController=new AbortController,c.signal=(a=this.abortController)===null||a===void 0?void 0:a.signal);const u=f=>this.emit("loading",f);t=yield Pc.fetchBlob(e,u,c);const d=this.options.blobMimeType;d&&(t=new Blob([t],{type:d}))}this.setSrc(e,t);const l=yield new Promise(c=>{const u=o||this.getDuration();u?c(u):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>c(this.getDuration()),{once:!0}))});if(!e&&!t){const c=this.getMediaElement();c instanceof Pt&&(c.duration=l)}if(r)this.decodedData=nt.createBuffer(r,l||0);else if(t){const c=yield t.arrayBuffer();this.decodedData=yield nt.decode(c,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(e,t,r){return ne(this,void 0,void 0,function*(){try{return yield this.loadAudio(e,void 0,t,r)}catch(o){throw this.emit("error",o),o}})}loadBlob(e,t,r){return ne(this,void 0,void 0,function*(){try{return yield this.loadAudio("",e,t,r)}catch(o){throw this.emit("error",o),o}})}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:r=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const o=Math.min(e,this.decodedData.numberOfChannels),a=[];for(let l=0;l<o;l++){const c=this.decodedData.getChannelData(l),u=[],d=c.length/t;for(let f=0;f<t;f++){const h=c.slice(Math.floor(f*d),Math.ceil((f+1)*d));let m=0;for(let v=0;v<h.length;v++){const x=h[v];Math.abs(x)>Math.abs(m)&&(m=x)}u.push(Math.round(m*r)/r)}a.push(u)}return a}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const r=Object.create(null,{play:{get:()=>super.play}});return ne(this,void 0,void 0,function*(){return e!=null&&this.setTime(e),t!=null&&(this.media instanceof Pt?this.media.stopAt(t):this.stopAtPosition=t),r.play.call(this)})}playPause(){return ne(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return ne(this,arguments,void 0,function*(e="image/png",t=1,r="dataURL"){return this.renderer.exportImage(e,t,r)})}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.timer.destroy(),this.renderer.destroy(),super.destroy()}}He.BasePlugin=class extends Ze{constructor(n){super(),this.subscriptions=[],this.options=n}onInit(){}_init(n){this.wavesurfer=n,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(n=>n())}},He.dom=Nc;const Wn=["#1DB954","#FF6B6B","#4A90E2","#FFD93D","#9B59B6"];function Tc({selectedVoices:n,timeRange:e,audioBuffer:t,duration:r,tab:o,url:a,voiceSelections:l,setVoiceSelections:c,audioUrl:u,audioFile:d}){var Q,G;const f=s.useRef(null),h=s.useRef(null),m=s.useRef(null),v=s.useRef(null),[x,p]=s.useState(null),[g,w]=s.useState(!1),[y,S]=s.useState(null),[P,N]=s.useState(!1),[D,k]=s.useState(null),E=s.useRef(null);s.useEffect(()=>{var R;(R=E.current)==null||R.pause(),N(!1),E.current&&(E.current.currentTime=0,k(C=>({...C,value:0})))},[u,o]),s.useEffect(()=>{c(R=>n.map((L,M)=>{const K=R.find(J=>J.voice===L);return{voice:L,range:K?K.range:e,color:Wn[M%Wn.length]}}))},[n,e]);const I=s.useCallback(()=>{var J;const R=f.current;if(!R)return;const C=R.getContext("2d");if(!C)return;const L=window.devicePixelRatio||1,M=R.getBoundingClientRect();if(R.width=M.width*L,R.height=M.height*L,C.scale(L,L),C.clearRect(0,0,M.width,M.height),!d)return;if(t)C.fillStyle="#333333",C.font="10px Arial",[0,30,60,90,120,150,180].forEach(b=>{const $=b/r*M.width;C.fillText(pe(b),$,10)}),l.forEach((b,$)=>{const A=b.range[0]/r*M.width,j=b.range[1]/r*M.width,H=20+$*20;if(C.fillStyle=`${b.color}33`,C.fillRect(A,0,j-A,M.height),C.fillStyle=b.color,C.font="12px Arial",C.fillText(b.voice,A+5,H),V(C,A,b.color,"start"),V(C,j,b.color,"end"),y&&(x==null?void 0:x.voice)===b.voice){const T=y.time/r*M.width,W=15,q=pe(y.time);C.fillStyle="rgba(0, 0, 0, 0.7)",C.fillRect(T-20,W-12,40,16),C.fillStyle="#ffffff",C.font="10px Arial",C.textAlign="center",C.fillText(q,T,W)}});else if(a&&o=="youtube"){C.fillStyle="#333333",C.font="10px Arial";const z=[],b=r/15;for(let $=0;$<r;$+=b)z.push($);Array.isArray(z)&&z.forEach($=>{const A=$/r*M.width;C.fillText(pe($),A,10)}),Array.isArray(l)&&l.forEach(($,A)=>{const j=$.range[0]/r*M.width,H=$.range[1]/r*M.width,T=20+A*20;if(C.fillStyle=`${$.color}33`,C.fillRect(j,0,H-j,M.height),C.fillStyle=$.color,C.font="12px Arial",C.fillText($.voice,j+5,T),V(C,j,$.color,"start"),V(C,H,$.color,"end"),y&&(x==null?void 0:x.voice)===$.voice){const W=y.time/r*M.width,q=15,_=pe(y.time);C.fillStyle="rgba(0, 0, 0, 0.7)",C.fillRect(W-20,q-12,40,16),C.fillStyle="#ffffff",C.font="10px Arial",C.textAlign="center",C.fillText(_,W,q)}})}const K=((J=E.current)==null?void 0:J.currentTime)/r*M.width;C.strokeStyle="#FFFFFF",C.lineWidth=2,C.beginPath(),C.moveTo(K,0),C.lineTo(K,M.height),C.stroke()},[a,o,r,l,x,y,(Q=E.current)==null?void 0:Q.currentTime,d]),V=(R,C,L,M)=>{R.fillStyle=L,R.beginPath(),R.moveTo(C,0),R.lineTo(C+10,15),R.lineTo(C-10,15),R.closePath(),R.fill(),R.strokeStyle=L,R.lineWidth=2,R.beginPath(),R.moveTo(C,0),R.lineTo(C,R.canvas.height),R.stroke()},F=s.useCallback(R=>{if(!x)return;const C=f.current;if(!C)return;const L=C.getBoundingClientRect(),M=Math.max(0,Math.min(R.clientX-L.left,L.width)),K=M/L.width*r;S({time:K,x:M,handle:x.handle}),c(J=>J.map(z=>{if(z.voice===x.voice){const b=[...z.range];return x.handle==="start"?b[0]=Math.min(K,z.range[1]-.1):b[1]=Math.max(K,z.range[0]+.1),{...z,range:b}}return z})),I()},[x,r,I]),Y=s.useCallback(()=>{p(null),S(null)},[]);return s.useEffect(()=>{const R=f.current;if(!R)return;const C=L=>{const M=R.getBoundingClientRect(),K=L.clientX-M.left,J=K/M.width*r;let z=!1;l.forEach(b=>{const $=b.range[0]/r*M.width,A=b.range[1]/r*M.width;Math.abs(K-$)<10?(p({voice:b.voice,handle:"start"}),S({time:J,x:K,handle:"start"}),z=!0):Math.abs(K-A)<10&&(p({voice:b.voice,handle:"end"}),S({time:J,x:K,handle:"end"}),z=!0)}),!z&&E.current&&(E.current.currentTime=J)};return R.addEventListener("mousedown",C),document.addEventListener("mousemove",F),document.addEventListener("mouseup",Y),()=>{R.removeEventListener("mousedown",C),document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",Y)}},[r,l,F,Y]),s.useEffect(()=>{if(!f.current)return;const C=()=>I();return window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}},[I]),s.useEffect(()=>{var R;return m.current&&u&&o=="audio"&&d?(w(!0),v.current=He.create({container:m.current,cursorColor:"transparent",barWidth:6,height:"auto",width:"100%",barRadius:50}),(async()=>(await v.current.load(u),w(!1)))()):(R=v.current)==null||R.destroy(),()=>{var C;return(C=v.current)==null?void 0:C.destroy()}},[u,o,d]),I(),i.jsxs("div",{className:"bg-[#1a1a1a] rounded-xl p-4",children:[i.jsx("h2",{className:"text-white/60 uppercase text-xs mb-2",children:"DAW"}),i.jsx("div",{className:"h-36",children:i.jsxs("div",{className:"daw relative overflow-hidden bg-[#292929] rounded-lg",children:[o=="audio"?i.jsx("div",{ref:m,className:`w-full h-20 rounded-lg pointer-events-none top-2/5 -translate-y-2/5 left-0 absolute z-[8] overflow-hidden bg-[#292929] ${o=="audio"?"block":"hidden"}`}):i.jsx("div",{ref:h,className:`w-full h-20 rounded-lg pointer-events-none top-2/5 -translate-y-2/5 left-0 absolute z-[9] overflow-hidden bg-[#292929] ${o=="youtube"?"block":"hidden"}`}),o=="audio"&&g&&i.jsx("div",{className:"w-full h-36 rounded-lg pointer-events-none top-1/2 -translate-y-1/2 left-0 absolute z-[10] bg-transparent flex justify-center items-center",children:i.jsx(Ec,{})}),i.jsx("canvas",{ref:f,className:"w-full h-36 rounded-lg cursor-pointer relative z-[11]"}),i.jsxs("div",{className:"flex w-full justify-between items-end absolute bottom-2 px-2 z-[12] pointer-events-none",children:[i.jsx("div",{className:"flex justify-center items-center gap-5 translate-y-0.5 pointer-events-auto",children:(t&&o=="audio"||o=="youtube"&&a)&&i.jsxs(i.Fragment,{children:[i.jsx("audio",{ref:E,src:u,id:"selectedAudio",controls:!0,className:"hidden",onPlay:()=>{for(let C=0;C<4;C++){const L=document.getElementById(`resultantAudio${C}`);L==null||L.pause()}const R=document.getElementById("footerAudioPlayer");R==null||R.pause(),N(!0)},onPause:()=>{N(!1)},onLoadedMetadata:R=>{k(C=>{var L;return{...C,max:Math.floor((L=R.target)==null?void 0:L.duration)}})},onTimeUpdate:R=>{k(C=>{var L;return{...C,value:Math.floor((L=R.target)==null?void 0:L.currentTime)}})}}),i.jsx("div",{className:"w-9 h-9 rounded-full bg-grayBackground border border-white/20 transition-all duration-200 flex justify-center items-center",onClick:()=>{var R,C;P?(R=E.current)==null||R.pause():(C=E.current)==null||C.play()},children:P?i.jsx(qn,{size:16}):i.jsx(Xn,{size:16})})]})}),i.jsxs("div",{className:"bg-black/80 text-white text-xs px-2 py-1 rounded",children:[t||a?`${pe(o=="youtube"?0:(G=E.current)==null?void 0:G.currentTime)} / ${pe(r)}`:"0:00 / 0:00"," "]})]})]})})]})}const _c=s.memo(Tc),Dc=()=>{const[n,e]=s.useState([]),[t,r]=s.useState([]),[o,a]=s.useState("audio"),[l,c]=s.useState(0),[u,d]=s.useState(0),[f,h]=s.useState(""),[m,v]=s.useState(""),[x,p]=s.useState(""),[g,w]=s.useState([0,0]),[y,S]=s.useState([0,0]),[P,N]=s.useState(null),[D,k]=s.useState(null),[E,I]=s.useState([]),[V,F]=s.useState(!1),[Y,Q]=s.useState(!1),[G,R]=s.useState(Mn),[C,L]=s.useState(0),[M,K]=s.useState(0),J=es(),[z,b]=s.useState(null),$=localStorage.getItem("isGenerating");s.useEffect(()=>{$&&b($)},[]),s.useEffect(()=>{if(D){e([]),I([]);const _=new FileReader;_.onload=async B=>{var de;const O=(de=B.target)==null?void 0:de.result,te=await new(window.AudioContext||window.webkitAudioContext)().decodeAudioData(O);N(te),L(te.duration),w([0,te.duration])},_.readAsArrayBuffer(D)}},[D]);const{mutate:A,isPending:j}=bn({mutationKey:["generate audios",o?D:m],mutationFn:Cs,onError:_=>{if(localStorage.setItem("isGenerating","failed"),_.status==401)return $e("Please login to generate audio.");$e("Something went wrong. Please try again."),b("failed")},onSuccess:_=>{localStorage.setItem("job_id",_.job_id),_.status=="queued"&&(localStorage.setItem("isGenerating","pending"),b("pending"));const B=J.getQueryData(["queue-size"]);(B==null?void 0:B.queue_size)>0&&$e("Please wait for the generation to complete until queue size becomes zero.")}}),H=bn({mutationKey:["handleFileStoringOnCloud",f],mutationFn:Ss,onError:_=>{if(localStorage.setItem("isGenerating","failed"),_.status==401)return $e("Please login to generate audio.");$e("Something went wrong. Please try again."),b("failed")},onSuccess:_=>{var se;const B=o=="audio"?Y?(n==null?void 0:n.length)==0?"advanced-file":"multiple":(n==null?void 0:n.length)==0?"file":"multiple":Y?"advanced":"regular",O=new FormData;if(O.append("task_type",B),O.append("audio_url",_==null?void 0:_.audio_url),Y&&((se=Object.keys(G))==null||se.forEach((te,de)=>{var ye;O.append(te,(ye=Object.values(G))==null?void 0:ye[de])})),E.length>0)O.append("voice_one",E[0].voice),O.append("pitch_one",l.toString()),O.append("singer1_start",new Date(E[0].range[0]*1e3).toISOString().substring(11,19)),O.append("singer1_end",new Date(E[0].range[1]*1e3).toISOString().substring(11,19)),E.length==2&&(O.append("voice_two",E[1].voice),O.append("pitch_two",l.toString()),O.append("singer2_start",new Date(E[1].range[0]*1e3).toISOString().substring(11,19)),O.append("singer2_end",new Date(E[1].range[1]*1e3).toISOString().substring(11,19)));else{const te=(n==null?void 0:n.length)==0?"Morgan Freeman RVC v2":n;O.append("voice",te.toString()),O.append("pitch",l.toString())}A({token:localStorage.getItem("astraToken"),formData:O})}}),T=(_,B)=>{Q(!0),R(O=>({...O,[_]:B}))},W=_=>{if(_)if(_.size<=15*1024*1024&&(_.type==="audio/mpeg"||_.type==="audio/wav")){k(_);const B=URL.createObjectURL(_);h(B)}else alert("Please upload an MP3 or WAV file under 15MB.")};s.useEffect(()=>{(async()=>{var _,B,O,se;if(m&&m.includes("https://www.youtube.com/watch?v=")){const te=m.split("watch?v=")[1],fe=((se=(O=(B=(_=(await ws.get(`https://www.googleapis.com/youtube/v3/videos?id=${te}&part=contentDetails,snippet&key=AIzaSyBEt1oYb9Hv6GOGVqeJUdZpzhmWDYQnsGE`)).data)==null?void 0:_.items)==null?void 0:B[0])==null?void 0:O.contentDetails)==null?void 0:se.duration).match(/PT(\d+M)?(\d+S)?/),Go=fe[1]?parseInt(fe[1].slice(0,-1)):0,Zo=fe[2]?parseInt(fe[2].slice(0,-1)):0,gn=Go*60+Zo;S([0,gn]),K(gn)}})()},[m]);function q(){const _=localStorage.getItem("astraToken");if(!_)return $e("Please login to generate audio.");if(!((o==="audio"?!D:!m)||(z==null?void 0:z.toLocaleLowerCase())=="pending")&&(localStorage.removeItem("job_id"),localStorage.removeItem("audioLinks"),localStorage.setItem("isGenerating","pending"),b("pending"),o=="audio"&&D)){const B=new FormData;B.append("file",D),H.mutate({token:_,formData:B})}}return i.jsxs("div",{className:"flex-1 container mx-auto px-4 pt-4 pb-1.5 max-w-[1200px]",children:[i.jsx("h1",{className:"text-3xl mb-3.5 text-center",children:"AI Cover"}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-6 group-data-[sidebaropen=true]:lg:grid-cols-6 gap-4",children:[i.jsxs("div",{className:"lg:col-span-3 group-data-[sidebaropen=true]:lg:col-span-3 bg-[#1a1a1a] rounded-xl overflow-hidden flex items-start flex-col",children:[i.jsx("div",{className:"flex flex-grow justify-between w-full max-h-[420x] h-full",children:i.jsxs(Ws,{defaultValue:o,onValueChange:_=>a(_),className:"w-full flex-grow group",children:[i.jsx("div",{className:"px-4 pt-4 flex-shrink-0",children:i.jsxs(zs,{className:"w-full bg-transparent grid grid-cols-2 gap-2",children:[i.jsx(yn,{value:"audio",className:"py-3 data-[state=active]:bg-[#292929] bg-transparent text-white border-0 data-[state=active]:text-white rounded-sm cursor-pointer",children:"Audio File"}),i.jsx(yn,{disabled:!0,value:"youtube",className:"py-3 data-[state=active]:bg-[#292929] bg-transparent text-white border-0 data-[state=active]:text-white rounded-sm cursor-pointer",children:"YouTube (Coming Soon)"})]})}),i.jsxs("div",{className:"p-4 flex-grow flex items-center flex-col justify-between",children:[i.jsxs("div",{className:"w-full",children:[i.jsx("div",{"data-selectedtabaicover":o,className:"data-[selectedtabaicover=youtube]:block data-[selectedtabaicover=audio]:hidden m-0",children:i.jsx(Rl,{url:m,setUrl:v,selectedVoices:t,setSelectedVoices:r,pitch:u,setPitch:d,duration:M})}),i.jsx("div",{"data-selectedtabaicover":o,className:"data-[selectedtabaicover=audio]:block data-[selectedtabaicover=youtube]:hidden m-0",children:i.jsx(Tl,{selectedVoices:n,setSelectedVoices:e,pitch:l,setPitch:c,onFileUpload:W,isPending:j,audioFile:D,handleClearAudio:()=>{k(null),e([]),c(0),N(null);const _=document.getElementById("selectedAudio");_==null||_.pause();for(let B=0;B<4;B++){const O=document.getElementById(`resultantAudio${B}`);O==null||O.pause()}R(Mn),Q(!1),b(null)}})})]}),i.jsxs("div",{className:"mt-3 w-full",children:[i.jsx(Ce,{variant:"link",className:"text-white/60 p-0 h-auto text-xs uppercase hover:text-white cursor-pointer",onClick:()=>F(!0),disabled:(z==null?void 0:z.toLocaleLowerCase())=="pending"||j,children:"Advanced Settings"}),i.jsx("div",{className:"pt-2",children:i.jsxs(gs,{children:[i.jsx(xs,{asChild:!0,children:i.jsx(Ce,{className:"w-full bg-black hover:bg-black/80 text-white cursor-pointer disabled:pointer-events-auto disabled:opacity-30",disabled:(o==="audio"?!D:!m)||(z==null?void 0:z.toLocaleLowerCase())=="pending"||j,onClick:()=>q(),children:j||(z==null?void 0:z.toLocaleLowerCase())=="pending"?"Converting":"Convert"})}),(z==null?void 0:z.toLowerCase())==="pending"?i.jsx(xn,{className:"bg-black text-white",children:"Please wait for the previous convertion to complete"}):(o==="audio"?D:m)?null:i.jsx(xn,{className:"bg-black text-white",children:o==="audio"?"Please select an audio file":"Please enter a YouTube URL"})]})})]})]})]})}),i.jsx(xc,{open:V,onOpenChange:F,advanceSettings:G,updateAdvanceSetting:T})]}),i.jsxs("div",{className:"lg:col-span-3 space-y-4",children:[i.jsx(_c,{selectedVoices:o=="youtube"?t:n,timeRange:o=="youtube"?y:g,voiceSelections:E,setVoiceSelections:I,duration:o=="youtube"?M:C,audioUrl:f,tab:o,url:x,audioBuffer:P,audioFile:D}),i.jsx(Ml,{isPending:j,setIsGenerating:b,isGenerating:z})]})]})]})},ou=s.memo(Dc);export{ou as default};
