import{r as b,c as w,j as e,L as y}from"./index-CFFUfh0C.js";import{B as x}from"./button-B9BAtukY.js";import{L as u,I as g}from"./label-CuuTb9r_.js";import{u as L,C as p,F as o,a as C,b as E,s as F,L as S}from"./FormFieldError-BOpQ_sFT.js";import{L as k}from"./AxiosCalls-GSK0K1sH.js";import{u as P,R as B}from"./refresh-ccw-sHEB_vh7.js";import{s as R}from"./utils-DCjegGDd.js";import"./index-Bmg67rh0.js";import"./index-L8d6qaRj.js";import"./createLucideIcon-hG1hW0R9.js";function _(){var l,c;const f=w(),{control:i,formState:{errors:s},handleSubmit:h,setError:j}=L({defaultValues:{email:"",password:""},resolver:F(S)}),{mutate:v,isPending:r}=P({mutationKey:["Login"],mutationFn:k,onError:a=>{j("root",{message:"Email or password is invalid."}),console.log("signup error: ",a)},onSuccess:a=>{R(a.access_token),f("/",{replace:!0})}}),N=a=>{r||v(a)};return e.jsx("main",{className:"flex min-h-svh flex-col items-center justify-center gap-6 bg-background p-6 md:p-10",children:e.jsx("div",{className:"w-full max-w-[420px]",children:e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("form",{onSubmit:h(N),children:e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsxs("div",{className:"flex flex-col items-center gap-2 font-medium",children:[e.jsx("div",{className:"flex h-20 w-20 items-center justify-center rounded-md",children:e.jsx("img",{src:"/logo.png",width:80,height:80,className:"size-20"})}),e.jsx("span",{className:"sr-only"})]}),e.jsx("h1",{className:"text-[18px] font-bold",children:"Welcome Back to Astra Labs"}),e.jsx("div",{className:"text-center text-sm",children:"Log in to your account"})]}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("div",{className:"grid gap-2",children:[e.jsx(u,{htmlFor:"email",children:"Email"}),e.jsx(p,{control:i,name:"email",render:({field:a})=>e.jsx(g,{id:"email",type:"email",placeholder:"m@example.com",required:!0,disabled:r,value:a.value,onChange:t=>a.onChange(typeof t=="string"?t:t.target.value)})}),e.jsx(o,{message:(l=s==null?void 0:s.email)==null?void 0:l.message})]}),e.jsxs("div",{className:"grid gap-2 mb-0",children:[e.jsx(u,{htmlFor:"password",children:"Password"}),e.jsx(p,{control:i,name:"password",render:({field:a})=>{var t,m,d;return e.jsxs(e.Fragment,{children:[e.jsx(g,{id:"password",type:"password",placeholder:"Enter password",required:!0,disabled:r,value:a.value,onChange:n=>a.onChange(typeof n=="string"?n:n.target.value)}),((t=s==null?void 0:s.password)==null?void 0:t.message)&&e.jsx(o,{message:((m=a.value)==null?void 0:m.length)==0?(d=s==null?void 0:s.password)==null?void 0:d.message:"Password is incorrect."})]})}})]}),e.jsx(o,{message:((c=s==null?void 0:s.root)==null?void 0:c.message)||" "}),r?e.jsxs(x,{type:"button",variant:"secondary",disabled:!0,className:"w-full cursor-pointer",children:["Logging ",e.jsx(B,{className:"animate-spin duration-150"})]}):e.jsx(x,{type:"submit",variant:"secondary",className:"w-full cursor-pointer",children:"Login"})]}),e.jsx("div",{className:"relative text-center text-sm after:absolute after:inset-0 after:top-1/2 after:z-0 after:flex after:items-center after:border-t after:border-border",children:e.jsx("span",{className:"relative z-10 px-2 text-muted-foreground bg-[#272322]",children:"OR"})}),e.jsxs("div",{className:"grid gap-2 sm:grid-cols-2",children:[e.jsx(C,{}),e.jsx(E,{})]})]})}),e.jsxs("div",{className:"text-center text-sm mt-6 mb-1",children:["Don't have an account?"," ",e.jsx(y,{to:"/sign-up",className:"underline underline-offset-4 ml-2 border-none outline-none",children:"Sign up"})]}),e.jsxs("div",{className:"max-w-sm mx-auto text-center text-xs text-muted-foreground [&_a]:underline [&_a]:underline-offset-4 hover:[&_a]:text-primary",children:["By clicking continue, you agree to our ",e.jsx("a",{href:"#",children:"Terms of Service"})," ","and ",e.jsx("a",{href:"#",children:"Privacy Policy"}),"."]})]})})})}const O=b.memo(_);export{O as default};
